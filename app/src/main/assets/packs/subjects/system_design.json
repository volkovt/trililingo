{
  "packVersion": 1,
  "subjectId": "system_design",
  "subjectName": "System Design",
  "tracks": [
    {
      "id": "system_design_fundamentals",
      "title": "System Design",
      "subtitle": "Arquitetura, escalabilidade e confiabilidade",
      "enabled": true,
      "features": [
        {
          "id": "daily_challenge",
          "type": "DAILY_CHALLENGE",
          "title": "Desafio Di√°rio",
          "subtitle": "Perguntas do dia",
          "emoji": "‚ö°",
          "enabled": true
        },
        {
          "id": "free_study",
          "type": "STUDY",
          "title": "Estudo Livre",
          "subtitle": "Sess√£o aberta de estudo",
          "emoji": "üß†",
          "enabled": true
        }
      ],
      "studyContent": {
        "source": {
          "book": "generated_system_design_v1",
          "authors": [],
          "mdOutline": "",
          "language": ""
        },
        "chapters": [
          {
            "chapter": 1,
            "id": "fundamentos_system_design",
            "title": "Fundamentos de System Design",
            "keyTopics": [
              "Objetivos do system design",
              "Trade-offs",
              "Lat√™ncia vs throughput",
              "Escalabilidade",
              "Confiabilidade",
              "Evolu√ß√£o incremental"
            ],
            "questions": [
              {
                "id": "ch1_q01",
                "type": [
                  "system_design",
                  "fundamentos"
                ],
                "prompt": "O que √© *system design* e qual √© o objetivo principal de uma entrevista de system design?",
                "difficulty": 1,
                "tags": [],
                "expected": "Projetar sistemas escal√°veis/confi√°veis; avaliar racioc√≠nio, trade-offs e comunica√ß√£o."
              },
              {
                "id": "ch1_q02",
                "type": [
                  "system_design",
                  "tradeoffs"
                ],
                "prompt": "Defina: lat√™ncia, throughput, disponibilidade e durabilidade (durability).",
                "difficulty": 1,
                "tags": [],
                "expected": "Lat√™ncia=tempo por requisi√ß√£o; throughput=requisi√ß√µes/tempo; disponibilidade=tempo no ar; durabilidade=perda de dados improv√°vel."
              },
              {
                "id": "ch1_q03",
                "type": [
                  "system_design",
                  "tradeoffs"
                ],
                "prompt": "Explique o trade-off entre *lat√™ncia* e *consist√™ncia* em sistemas distribu√≠dos.",
                "difficulty": 2,
                "tags": [],
                "expected": "Consist√™ncia forte costuma exigir coordena√ß√£o/qu√≥rum, aumentando lat√™ncia; eventual √© mais r√°pida mas pode ler dados desatualizados."
              },
              {
                "id": "ch1_q04",
                "type": [
                  "system_design",
                  "escala"
                ],
                "prompt": "Qual a diferen√ßa entre *escala vertical* e *escala horizontal*? D√™ exemplos.",
                "difficulty": 1,
                "tags": [],
                "expected": "Vertical = m√°quina maior; horizontal = mais inst√¢ncias/parti√ß√µes."
              },
              {
                "id": "ch1_q05",
                "type": [
                  "system_design",
                  "confiabilidade"
                ],
                "prompt": "O que significa um sistema ser *fault-tolerant* e *highly available*? S√£o a mesma coisa?",
                "difficulty": 2,
                "tags": [],
                "expected": "HA foca em uptime; fault-tolerant continua operando mesmo com falhas de componentes. Relacionados, mas n√£o id√™nticos."
              },
              {
                "id": "ch1_q06",
                "type": [
                  "system_design",
                  "tradeoffs"
                ],
                "prompt": "O que s√£o *bottlenecks* comuns em sistemas web e como voc√™ os identifica?",
                "difficulty": 2,
                "tags": [],
                "expected": "CPU, IO, DB, lock contention, rede; identificar via m√©tricas/tracing/profiling e testes de carga."
              },
              {
                "id": "ch1_q07",
                "type": [
                  "system_design",
                  "abordagem"
                ],
                "prompt": "Explique uma abordagem em 6 passos para conduzir um design (requisitos ‚Üí estimativas ‚Üí arquitetura ‚Üí detalhes ‚Üí falhas ‚Üí custos).",
                "difficulty": 2,
                "tags": [],
                "expected": "Come√ßar por requisitos e constraints, estimar carga, desenhar blocos, detalhar componentes, discutir falhas/mitiga√ß√µes e custos."
              },
              {
                "id": "ch1_q08",
                "type": [
                  "system_design",
                  "tradeoffs"
                ],
                "prompt": "O que √© *single point of failure* (SPOF)? D√™ 3 exemplos e como evitar.",
                "difficulty": 2,
                "tags": [],
                "expected": "Componente √∫nico que derruba o sistema; ex: DB √∫nico, LB √∫nico, fila √∫nica. Evitar com redund√¢ncia e failover."
              },
              {
                "id": "ch1_q09",
                "type": [
                  "system_design",
                  "evolucao"
                ],
                "prompt": "Por que projetos de system design costumam ser evolutivos (MVP ‚Üí escala) em vez de 'tudo pronto'?",
                "difficulty": 2,
                "tags": [],
                "expected": "Incertezas de requisitos e carga; custo; risco; valida√ß√£o incremental com m√©tricas reais."
              },
              {
                "id": "ch1_q10",
                "type": [
                  "system_design",
                  "SLO"
                ],
                "prompt": "Diferencie SLA, SLO e SLI com um exemplo pr√°tico.",
                "difficulty": 2,
                "tags": [],
                "expected": "SLA=contrato; SLO=meta interna; SLI=m√©trica medida (ex: lat√™ncia p95)."
              },
              {
                "id": "ch1_q11",
                "type": [
                  "system_design",
                  "consistencia"
                ],
                "prompt": "O que √© *consist√™ncia forte* vs *eventual*? Em quais produtos cada uma √© mais comum?",
                "difficulty": 2,
                "tags": [],
                "expected": "Forte: leitura sempre atual; eventual: converge com tempo. Forte em bancos transacionais; eventual em caches/feeds."
              },
              {
                "id": "ch1_q12",
                "type": [
                  "system_design",
                  "componentes"
                ],
                "prompt": "Explique por que separar *compute* de *storage* ajuda na escalabilidade.",
                "difficulty": 2,
                "tags": [],
                "expected": "Permite escalar processamento independentemente do armazenamento; reduz acoplamento e melhora elasticidade."
              },
              {
                "id": "ch1_q13",
                "type": [
                  "system_design",
                  "interfaces"
                ],
                "prompt": "O que √© um *contrato* entre servi√ßos e por que 'quebrar contrato' √© caro?",
                "difficulty": 2,
                "tags": [],
                "expected": "Formato/sem√¢ntica esperada; quebra gera cascata de falhas e retrabalho em m√∫ltiplos times."
              },
              {
                "id": "ch1_q14",
                "type": [
                  "system_design",
                  "complexidade"
                ],
                "prompt": "Cite 5 *building blocks* comuns em arquiteturas modernas (LB, cache, fila, DB, CDN etc.) e o papel de cada um.",
                "difficulty": 1,
                "tags": [],
                "expected": "Componentes padr√£o com fun√ß√µes claras: balancear, acelerar, desacoplar, persistir, distribuir conte√∫do."
              },
              {
                "id": "ch1_q15",
                "type": [
                  "system_design",
                  "tradeoffs"
                ],
                "prompt": "Por que 'o melhor design' depende do contexto? D√™ 2 exemplos de decis√µes que mudam com o neg√≥cio.",
                "difficulty": 2,
                "tags": [],
                "expected": "Requisitos/custos/risco variam: consist√™ncia forte vs eventual; mon√≥lito vs microservices; streaming vs batch."
              },
              {
                "id": "ch1_q16",
                "type": [
                  "system_design",
                  "documentacao"
                ],
                "prompt": "Quais diagramas voc√™ normalmente usa para comunicar um design? (alto n√≠vel, sequ√™ncia, dados).",
                "difficulty": 2,
                "tags": [],
                "expected": "C4/arquitetura alto n√≠vel, sequ√™ncia para fluxos, ER/entidades, deployment/infra."
              },
              {
                "id": "ch1_q17",
                "type": [
                  "system_design",
                  "performance"
                ],
                "prompt": "Explique a diferen√ßa entre *p50*, *p95* e *p99* de lat√™ncia e por que p99 importa.",
                "difficulty": 2,
                "tags": [],
                "expected": "Percentis; p99 mostra cauda (experi√™ncia ruim) e afeta SLO e usu√°rios sens√≠veis."
              },
              {
                "id": "ch1_q18",
                "type": [
                  "system_design",
                  "tradeoffs"
                ],
                "prompt": "Qual o impacto de *n+1* chamadas entre servi√ßos e como mitigar?",
                "difficulty": 3,
                "tags": [],
                "expected": "Aumenta lat√™ncia e falhas; mitigar com agrega√ß√£o, BFF, batch APIs, caching e evitar chatty services."
              },
              {
                "id": "ch1_q19",
                "type": [
                  "system_design",
                  "design_principles"
                ],
                "prompt": "O que significa 'stateless' no backend e por que isso facilita scale-out?",
                "difficulty": 2,
                "tags": [],
                "expected": "Estado n√£o fica na inst√¢ncia; facilita adicionar/remover inst√¢ncias sem perder sess√µes."
              },
              {
                "id": "ch1_q20",
                "type": [
                  "system_design",
                  "tradeoffs"
                ],
                "prompt": "D√™ exemplos de escolhas que aumentam disponibilidade mas reduzem consist√™ncia (e vice-versa).",
                "difficulty": 3,
                "tags": [],
                "expected": "Multi-master eventual aumenta disponibilidade; strong quorum aumenta consist√™ncia mas pode negar escrita em parti√ß√£o."
              }
            ]
          },
          {
            "chapter": 2,
            "id": "requisitos_e_nao_funcionais",
            "title": "Requisitos e N√£o-Funcionais (NFRs)",
            "keyTopics": [
              "Requisitos funcionais",
              "NFRs",
              "SLO/SLA/SLI",
              "Constraints",
              "Prioridades",
              "Anti-requisitos"
            ],
            "questions": [
              {
                "id": "ch2_q01",
                "type": [
                  "requirements",
                  "funcionais"
                ],
                "prompt": "Liste requisitos funcionais t√≠picos em um servi√ßo (criar/ler/atualizar/deletar, busca, autentica√ß√£o etc.).",
                "difficulty": 1,
                "tags": [],
                "expected": "Opera√ß√µes do produto: CRUD, busca, login, feed, notifica√ß√µes, relat√≥rios."
              },
              {
                "id": "ch2_q02",
                "type": [
                  "requirements",
                  "nfr"
                ],
                "prompt": "O que s√£o NFRs? Cite pelo menos 8 (lat√™ncia, disponibilidade, custo, seguran√ßa...).",
                "difficulty": 1,
                "tags": [],
                "expected": "Propriedades do sistema: lat√™ncia, throughput, disponibilidade, durabilidade, seguran√ßa, privacidade, custo, manutenibilidade, observabilidade."
              },
              {
                "id": "ch2_q03",
                "type": [
                  "requirements",
                  "priorizacao"
                ],
                "prompt": "Como priorizar requisitos quando eles entram em conflito? D√™ um m√©todo simples.",
                "difficulty": 2,
                "tags": [],
                "expected": "Definir objetivos e trade-offs; usar MoSCoW ou ranking por impacto/risco/custo."
              },
              {
                "id": "ch2_q04",
                "type": [
                  "requirements",
                  "constraints"
                ],
                "prompt": "Explique a diferen√ßa entre *constraints* e *requisitos*. D√™ 3 exemplos de constraints.",
                "difficulty": 2,
                "tags": [],
                "expected": "Constraints s√£o limites (stack, regi√£o, custo, compliance); requisitos s√£o comportamentos desejados."
              },
              {
                "id": "ch2_q05",
                "type": [
                  "requirements",
                  "SLO"
                ],
                "prompt": "Como voc√™ escolheria um SLO de lat√™ncia para uma API cr√≠tica? Que dados voc√™ precisa?",
                "difficulty": 3,
                "tags": [],
                "expected": "Perfil de usu√°rios, picos, UX, benchmarks e custos; definir p95/p99 e budgets."
              },
              {
                "id": "ch2_q06",
                "type": [
                  "requirements",
                  "multi_tenant"
                ],
                "prompt": "O que muda quando um sistema √© multi-tenant? Cite 3 riscos e 3 mitigac√µes.",
                "difficulty": 3,
                "tags": [],
                "expected": "Isolamento, noisy neighbor, seguran√ßa; mitigar com quotas, particionamento, RBAC, limites e monitoramento."
              },
              {
                "id": "ch2_q07",
                "type": [
                  "requirements",
                  "consistencia"
                ],
                "prompt": "Quando o neg√≥cio exige consist√™ncia forte? D√™ 3 exemplos.",
                "difficulty": 2,
                "tags": [],
                "expected": "Saldo/transfer√™ncia, estoque cr√≠tico, permiss√µes/ACL, transa√ß√µes financeiras."
              },
              {
                "id": "ch2_q08",
                "type": [
                  "requirements",
                  "eventual"
                ],
                "prompt": "Quando eventual consistency √© aceit√°vel (ou desej√°vel)? D√™ 3 exemplos.",
                "difficulty": 2,
                "tags": [],
                "expected": "Feed, contadores aproximados, cache, analytics near-real-time."
              },
              {
                "id": "ch2_q09",
                "type": [
                  "requirements",
                  "escalabilidade"
                ],
                "prompt": "Defina 'carga m√©dia' vs 'pico' e por que projetar s√≥ para a m√©dia d√° ruim.",
                "difficulty": 2,
                "tags": [],
                "expected": "Pico derruba; dimensionar para picos e usar autoscaling/queues."
              },
              {
                "id": "ch2_q10",
                "type": [
                  "requirements",
                  "regulacao"
                ],
                "prompt": "Que perguntas de compliance/privacidade voc√™ faria antes de armazenar PII?",
                "difficulty": 3,
                "tags": [],
                "expected": "Necessidade, reten√ß√£o, criptografia, acesso m√≠nimo, auditoria, LGPD, consentimento, region constraints."
              },
              {
                "id": "ch2_q11",
                "type": [
                  "requirements",
                  "disponibilidade"
                ],
                "prompt": "Como disponibilidade (ex.: 99,9%) se traduz em 'tempo fora do ar' por m√™s?",
                "difficulty": 2,
                "tags": [],
                "expected": "99,9% ‚âà 43 min/m√™s; maior '9' reduz muito o downtime permitido."
              },
              {
                "id": "ch2_q12",
                "type": [
                  "requirements",
                  "SLO_budget"
                ],
                "prompt": "O que √© *error budget* e como ele orienta trade-offs entre feature e confiabilidade?",
                "difficulty": 3,
                "tags": [],
                "expected": "Or√ßamento de falhas permitido; se estoura, prioriza estabilidade e reduz risco de releases."
              },
              {
                "id": "ch2_q13",
                "type": [
                  "requirements",
                  "custos"
                ],
                "prompt": "Quais s√£o os principais drivers de custo em um sistema (compute, storage, egress...)?",
                "difficulty": 2,
                "tags": [],
                "expected": "Inst√¢ncias/CPU/RAM, IOPS, armazenamento, tr√°fego (egress), licen√ßas, observabilidade."
              },
              {
                "id": "ch2_q14",
                "type": [
                  "requirements",
                  "operacao"
                ],
                "prompt": "Quais perguntas voc√™ faria sobre opera√ß√£o/plant√£o (on-call) e impactos no design?",
                "difficulty": 2,
                "tags": [],
                "expected": "Alertas, runbooks, fallback, limites, simplicidade; design deve ser oper√°vel e depur√°vel."
              },
              {
                "id": "ch2_q15",
                "type": [
                  "requirements",
                  "latencia"
                ],
                "prompt": "Explique por que 'lat√™ncia de cauda' piora com fan-out (muitas chamadas).",
                "difficulty": 3,
                "tags": [],
                "expected": "Lat√™ncia total tende ao max das chamadas; mais chamadas aumenta chance de uma ser lenta."
              },
              {
                "id": "ch2_q16",
                "type": [
                  "requirements",
                  "anti_requisitos"
                ],
                "prompt": "O que s√£o *anti-requisitos*? D√™ um exemplo em design (o que N√ÉO vamos fazer agora).",
                "difficulty": 2,
                "tags": [],
                "expected": "Escopo explicitamente exclu√≠do; ex: 'sem busca full-text no MVP'."
              },
              {
                "id": "ch2_q17",
                "type": [
                  "requirements",
                  "SLA"
                ],
                "prompt": "O que incluir em um SLA de API (limites, disponibilidade, penalidades, janelas)?",
                "difficulty": 2,
                "tags": [],
                "expected": "Disponibilidade, lat√™ncia alvo, limites de rate, janelas de manuten√ß√£o, suporte e penalidades."
              },
              {
                "id": "ch2_q18",
                "type": [
                  "requirements",
                  "observabilidade"
                ],
                "prompt": "Por que observabilidade deve entrar como requisito desde o in√≠cio? D√™ 3 consequ√™ncias de n√£o ter.",
                "difficulty": 2,
                "tags": [],
                "expected": "Sem m√©tricas/traces n√£o d√° para detectar regress√µes, investigar incidentes e dimensionar corretamente."
              },
              {
                "id": "ch2_q19",
                "type": [
                  "requirements",
                  "seguranca"
                ],
                "prompt": "Como requisitos de seguran√ßa influenciam arquitetura (ex.: autentica√ß√£o central, segmenta√ß√£o)?",
                "difficulty": 3,
                "tags": [],
                "expected": "Imp√µe camadas de auth, segrega√ß√£o de rede, criptografia e auditoria; afeta fluxo e componentes."
              },
              {
                "id": "ch2_q20",
                "type": [
                  "requirements",
                  "produto"
                ],
                "prompt": "Crie uma lista de perguntas para esclarecer requisitos de um 'Sistema de Notifica√ß√µes' (canal, SLA, volume, dedupe...).",
                "difficulty": 3,
                "tags": [],
                "expected": "Canal (push/email/sms), volume, prioridade, garantia de entrega, dedupe, prefer√™ncias, templates, rastreio e opt-out."
              }
            ]
          },
          {
            "chapter": 3,
            "id": "estimativas",
            "title": "Estimativas e Back-of-the-envelope",
            "keyTopics": [
              "QPS/RPS",
              "Storage",
              "Bandwidth",
              "Picos",
              "Crescimento",
              "Margem de seguran√ßa"
            ],
            "questions": [
              {
                "id": "ch3_q01",
                "type": [
                  "estimativas",
                  "qps"
                ],
                "prompt": "Explique como estimar QPS/RPS a partir de usu√°rios ativos di√°rios e a√ß√µes por usu√°rio.",
                "difficulty": 2,
                "tags": [],
                "expected": "Converter DAU ‚Üí a√ß√µes/dia ‚Üí a√ß√µes/segundo; considerar picos e fatores de simultaneidade."
              },
              {
                "id": "ch3_q02",
                "type": [
                  "estimativas",
                  "picos"
                ],
                "prompt": "Por que estimar apenas m√©dia √© insuficiente? Como estimar pico com um fator simples?",
                "difficulty": 2,
                "tags": [],
                "expected": "Distribui√ß√£o desigual; usar fator 5x‚Äì20x dependendo do produto e hor√°rio."
              },
              {
                "id": "ch3_q03",
                "type": [
                  "estimativas",
                  "storage"
                ],
                "prompt": "Como estimar armazenamento necess√°rio para 1 ano de dados? (tamanho por registro √ó volume)",
                "difficulty": 2,
                "tags": [],
                "expected": "Calcular bytes por item, multiplicar por itens/dia √ó dias; somar √≠ndices e overhead."
              },
              {
                "id": "ch3_q04",
                "type": [
                  "estimativas",
                  "bandwidth"
                ],
                "prompt": "D√™ um exemplo de estimativa de bandwidth para servir imagens (tamanho m√©dio √ó req/s).",
                "difficulty": 2,
                "tags": [],
                "expected": "MB por imagem √ó requests/s = MB/s; converter para Mbps e considerar cache/CDN."
              },
              {
                "id": "ch3_q05",
                "type": [
                  "estimativas",
                  "cache_hit"
                ],
                "prompt": "Como *cache hit rate* afeta custo e lat√™ncia? Fa√ßa um racioc√≠nio simples.",
                "difficulty": 3,
                "tags": [],
                "expected": "Mais hit reduz chamadas ao DB/origem; diminui lat√™ncia e custo; misses dominam p99 se hit baixo."
              },
              {
                "id": "ch3_q06",
                "type": [
                  "estimativas",
                  "latencia_budget"
                ],
                "prompt": "O que √© *latency budget*? Divida um or√ßamento de 200ms entre componentes.",
                "difficulty": 3,
                "tags": [],
                "expected": "Alocar tempos para rede, auth, l√≥gica, DB/cache; orientar otimiza√ß√µes e limites."
              },
              {
                "id": "ch3_q07",
                "type": [
                  "estimativas",
                  "fanout"
                ],
                "prompt": "Como o fan-out (ex.: feed) muda as estimativas de QPS interno vs externo?",
                "difficulty": 3,
                "tags": [],
                "expected": "Uma request externa pode gerar N internas; QPS interno pode ser N√ó maior."
              },
              {
                "id": "ch3_q08",
                "type": [
                  "estimativas",
                  "growth"
                ],
                "prompt": "Como incorporar crescimento (ex.: 10% ao m√™s) no capacity planning?",
                "difficulty": 2,
                "tags": [],
                "expected": "Projetar para horizonte (6‚Äì12 meses) e definir gatilhos de re-dimensionamento."
              },
              {
                "id": "ch3_q09",
                "type": [
                  "estimativas",
                  "io_ps"
                ],
                "prompt": "O que s√£o IOPS e por que importam para bancos? D√™ exemplo de risco por IOPS insuficiente.",
                "difficulty": 2,
                "tags": [],
                "expected": "Opera√ß√µes de IO por segundo; insuficiente causa filas e lat√™ncia alta."
              },
              {
                "id": "ch3_q10",
                "type": [
                  "estimativas",
                  "db_indexes"
                ],
                "prompt": "Por que √≠ndices aumentam storage e custo de escrita? Como isso entra na estimativa?",
                "difficulty": 3,
                "tags": [],
                "expected": "√çndices duplicam dados e atualizam em writes; considerar overhead e impacto em throughput."
              },
              {
                "id": "ch3_q11",
                "type": [
                  "estimativas",
                  "payload"
                ],
                "prompt": "Como tamanho de payload (JSON grande) afeta custo e lat√™ncia? Cite 3 impactos.",
                "difficulty": 2,
                "tags": [],
                "expected": "Rede/egress, CPU de serializa√ß√£o, tempo de parse; piora p95/p99."
              },
              {
                "id": "ch3_q12",
                "type": [
                  "estimativas",
                  "SLO"
                ],
                "prompt": "Como ligar estimativas a SLOs (ex.: quantas inst√¢ncias para p95 < X)?",
                "difficulty": 3,
                "tags": [],
                "expected": "Usar benchmarks/load tests e modelos de fila; dimensionar com headroom."
              },
              {
                "id": "ch3_q13",
                "type": [
                  "estimativas",
                  "batch"
                ],
                "prompt": "Qual diferen√ßa de estimativas para batch vs online serving?",
                "difficulty": 2,
                "tags": [],
                "expected": "Batch foca throughput/janelas; online foca lat√™ncia e picos."
              },
              {
                "id": "ch3_q14",
                "type": [
                  "estimativas",
                  "multiregion"
                ],
                "prompt": "Como multi-regi√£o impacta custos e estimativas? (replica√ß√£o, egress, latency)",
                "difficulty": 3,
                "tags": [],
                "expected": "Duplica infra/replica√ß√£o, aumenta egress e complexidade; melhora HA global."
              },
              {
                "id": "ch3_q15",
                "type": [
                  "estimativas",
                  "queue"
                ],
                "prompt": "Como uma fila ajuda a 'absorver picos'? Explique com um exemplo num√©rico simples.",
                "difficulty": 2,
                "tags": [],
                "expected": "Se pico 10k/s e consumo 2k/s, fila armazena e processa ao longo do tempo, evitando queda."
              },
              {
                "id": "ch3_q16",
                "type": [
                  "estimativas",
                  "reserva"
                ],
                "prompt": "Qual margem de seguran√ßa (headroom) voc√™ costuma reservar e por qu√™?",
                "difficulty": 2,
                "tags": [],
                "expected": "20‚Äì50% dependendo do risco; cobre picos, falhas e varia√ß√£o de performance."
              },
              {
                "id": "ch3_q17",
                "type": [
                  "estimativas",
                  "ttl"
                ],
                "prompt": "Como reten√ß√£o (TTL) e compress√£o alteram o storage anual?",
                "difficulty": 2,
                "tags": [],
                "expected": "TTL reduz horizonte; compress√£o reduz bytes/item; ambos reduzem custo."
              },
              {
                "id": "ch3_q18",
                "type": [
                  "estimativas",
                  "S3_cost"
                ],
                "prompt": "Por que egress (sa√≠da de dados) pode dominar o custo em alguns sistemas?",
                "difficulty": 2,
                "tags": [],
                "expected": "Transfer√™ncia para internet/entre regi√µes; grandes volumes de m√≠dia e downloads."
              },
              {
                "id": "ch3_q19",
                "type": [
                  "estimativas",
                  "bottleneck"
                ],
                "prompt": "Como identificar rapidamente o *limite* do sistema (CPU, DB, rede) via estimativas?",
                "difficulty": 3,
                "tags": [],
                "expected": "Comparar capacidade de cada camada com demanda; o menor 'teto' √© o gargalo."
              },
              {
                "id": "ch3_q20",
                "type": [
                  "estimativas",
                  "applied"
                ],
                "prompt": "Fa√ßa uma estimativa: 1M DAU, 10 a√ß√µes/dia, pico 10x. Qual QPS no pico (aprox.)?",
                "difficulty": 2,
                "tags": [],
                "expected": "1M*10=10M/dia ‚âà116 QPS m√©dio; pico 10x ‚âà1160 QPS."
              }
            ]
          },
          {
            "chapter": 4,
            "id": "apis_e_contratos",
            "title": "APIs, Contratos e Integra√ß√£o",
            "keyTopics": [
              "REST",
              "gRPC",
              "Versionamento",
              "Idempot√™ncia",
              "Pagina√ß√£o",
              "Erro e retries",
              "SLAs de API"
            ],
            "questions": [
              {
                "id": "ch4_q01",
                "type": [
                  "api",
                  "rest"
                ],
                "prompt": "Quais s√£o as caracter√≠sticas de uma API REST bem desenhada? Cite 5.",
                "difficulty": 2,
                "tags": [],
                "expected": "Recursos, verbos HTTP, stateless, c√≥digos de status, idempot√™ncia, cache, HATEOAS (opcional)."
              },
              {
                "id": "ch4_q02",
                "type": [
                  "api",
                  "grpc"
                ],
                "prompt": "Quando gRPC √© uma escolha melhor que REST? Cite 3 cen√°rios.",
                "difficulty": 2,
                "tags": [],
                "expected": "Baixa lat√™ncia, comunica√ß√£o servi√ßo-a-servi√ßo, streaming, contratos fortes e schema evolution."
              },
              {
                "id": "ch4_q03",
                "type": [
                  "api",
                  "versioning"
                ],
                "prompt": "Compare estrat√©gias de versionamento (URL, header, campo). Qual risco de cada uma?",
                "difficulty": 3,
                "tags": [],
                "expected": "URL simples por√©m duplica endpoints; header/field mais flex√≠vel mas pode complicar gateways/clients."
              },
              {
                "id": "ch4_q04",
                "type": [
                  "api",
                  "pagination"
                ],
                "prompt": "Explique pagina√ß√£o por *offset* vs *cursor*. Qual √© mais est√°vel em dados mut√°veis?",
                "difficulty": 3,
                "tags": [],
                "expected": "Cursor √© mais est√°vel; offset sofre com inserts/deletes e p√°ginas inconsistentes."
              },
              {
                "id": "ch4_q05",
                "type": [
                  "api",
                  "idempotency"
                ],
                "prompt": "O que √© idempot√™ncia? D√™ exemplos de endpoints idempotentes e n√£o idempotentes.",
                "difficulty": 2,
                "tags": [],
                "expected": "Repetir mesma chamada n√£o muda efeito: GET/PUT; POST geralmente n√£o (cria duplicado) sem idempotency key."
              },
              {
                "id": "ch4_q06",
                "type": [
                  "api",
                  "idempotency_key"
                ],
                "prompt": "Como implementar *idempotency key* para POST de pagamento/cria√ß√£o de pedido?",
                "difficulty": 3,
                "tags": [],
                "expected": "Cliente envia chave; servidor registra resultado por chave e retorna mesmo response em retries."
              },
              {
                "id": "ch4_q07",
                "type": [
                  "api",
                  "errors"
                ],
                "prompt": "Como desenhar um contrato de erros consistente (c√≥digo, mensagem, detalhes, retryable)?",
                "difficulty": 3,
                "tags": [],
                "expected": "Estrutura padronizada com error_code, message, details, trace_id, e flag retryable."
              },
              {
                "id": "ch4_q08",
                "type": [
                  "api",
                  "timeouts"
                ],
                "prompt": "Por que timeouts de cliente e servidor devem ser coordenados?",
                "difficulty": 3,
                "tags": [],
                "expected": "Evita work in√∫til; previne cascata; cliente n√£o deve desistir antes do servidor sem cancelamento."
              },
              {
                "id": "ch4_q09",
                "type": [
                  "api",
                  "rate_limit"
                ],
                "prompt": "O que √© rate limiting e como expor limites ao cliente (headers, docs)?",
                "difficulty": 2,
                "tags": [],
                "expected": "Limitar requisi√ß√µes; expor via headers (limit/remaining/reset) e mensagens 429."
              },
              {
                "id": "ch4_q10",
                "type": [
                  "api",
                  "auth"
                ],
                "prompt": "Como autentica√ß√£o e autoriza√ß√£o entram no design de API (scopes/roles)?",
                "difficulty": 2,
                "tags": [],
                "expected": "Tokens e claims; checagens de permiss√£o por recurso; princ√≠pio do menor privil√©gio."
              },
              {
                "id": "ch4_q11",
                "type": [
                  "api",
                  "backward_compat"
                ],
                "prompt": "O que significa compatibilidade retroativa em APIs? D√™ 4 regras pr√°ticas.",
                "difficulty": 3,
                "tags": [],
                "expected": "S√≥ adicionar campos opcionais, n√£o renomear/remover, n√£o mudar sem√¢ntica, manter defaults."
              },
              {
                "id": "ch4_q12",
                "type": [
                  "api",
                  "webhooks"
                ],
                "prompt": "Quando webhooks s√£o melhores que polling? Cite cuidados (retry, assinatura, dedupe).",
                "difficulty": 3,
                "tags": [],
                "expected": "Eventos push; cuidados com assinatura, retries, ordering, idempot√™ncia e DLQ."
              },
              {
                "id": "ch4_q13",
                "type": [
                  "api",
                  "async"
                ],
                "prompt": "Como voc√™ desenha uma API ass√≠ncrona (202 Accepted + status endpoint)?",
                "difficulty": 2,
                "tags": [],
                "expected": "Retorna job_id, status endpoint, callbacks/webhooks; processamento em background."
              },
              {
                "id": "ch4_q14",
                "type": [
                  "api",
                  "consistency"
                ],
                "prompt": "Em uma API eventualmente consistente, como comunicar isso ao cliente?",
                "difficulty": 3,
                "tags": [],
                "expected": "Documentar; fornecer read-your-writes (quando poss√≠vel) ou status de propaga√ß√£o."
              },
              {
                "id": "ch4_q15",
                "type": [
                  "api",
                  "contracts"
                ],
                "prompt": "Por que contratos (OpenAPI/Protobuf) ajudam governan√ßa e manuten√ß√£o?",
                "difficulty": 2,
                "tags": [],
                "expected": "Documenta√ß√£o, gera√ß√£o de clients, valida√ß√£o e compatibilidade; reduz ambiguidades."
              },
              {
                "id": "ch4_q16",
                "type": [
                  "api",
                  "observability"
                ],
                "prompt": "Que informa√ß√µes voc√™ inclui em headers para depura√ß√£o distribu√≠da?",
                "difficulty": 2,
                "tags": [],
                "expected": "Trace-id/correlation-id, request-id, version, e informa√ß√µes de rate limit."
              },
              {
                "id": "ch4_q17",
                "type": [
                  "api",
                  "pagination",
                  "applied"
                ],
                "prompt": "D√™ um exemplo de cursor (token) e como ele evita saltos em pagina√ß√£o.",
                "difficulty": 3,
                "tags": [],
                "expected": "Token codifica √∫ltima chave/tempo; pr√≥ximo page come√ßa ap√≥s esse marcador."
              },
              {
                "id": "ch4_q18",
                "type": [
                  "api",
                  "grpc_stream"
                ],
                "prompt": "Cite um caso onde streaming (server/client/bidi) √© √∫til.",
                "difficulty": 2,
                "tags": [],
                "expected": "Chat/telemetria, uploads chunked, notifica√ß√µes em tempo real."
              },
              {
                "id": "ch4_q19",
                "type": [
                  "api",
                  "schema_evolution"
                ],
                "prompt": "O que s√£o regras de evolu√ß√£o de schema em Protobuf (campos, n√∫meros, reserved)?",
                "difficulty": 3,
                "tags": [],
                "expected": "N√£o reutilizar n√∫meros; marcar reservados; campos novos opcionais; manter compatibilidade."
              },
              {
                "id": "ch4_q20",
                "type": [
                  "api",
                  "design"
                ],
                "prompt": "Desenhe (em alto n√≠vel) endpoints para: criar pedido, pagar, consultar status e cancelar.",
                "difficulty": 3,
                "tags": [],
                "expected": "POST /orders, POST /payments (idempotency), GET /orders/{id}, POST /orders/{id}/cancel (ou PATCH status)."
              }
            ]
          },
          {
            "chapter": 5,
            "id": "modelagem_e_bancos",
            "title": "Modelagem de Dados e Bancos (SQL/NoSQL)",
            "keyTopics": [
              "Modelagem",
              "√çndices",
              "Transa√ß√µes",
              "SQL vs NoSQL",
              "OLTP vs OLAP",
              "Consist√™ncia",
              "Desnormaliza√ß√£o"
            ],
            "questions": [
              {
                "id": "ch5_q01",
                "type": [
                  "data",
                  "modelagem"
                ],
                "prompt": "Explique a diferen√ßa entre modelagem orientada a consultas vs orientada a normaliza√ß√£o.",
                "difficulty": 3,
                "tags": [],
                "expected": "Consultas prioriza leitura/joins m√≠nimos; normaliza√ß√£o reduz redund√¢ncia e anomalias de escrita."
              },
              {
                "id": "ch5_q02",
                "type": [
                  "db",
                  "sql_vs_nosql"
                ],
                "prompt": "Compare SQL vs NoSQL: quando cada um tende a ser melhor?",
                "difficulty": 2,
                "tags": [],
                "expected": "SQL para transa√ß√µes fortes e joins; NoSQL para escala horizontal e flexibilidade, √†s vezes com consist√™ncia eventual."
              },
              {
                "id": "ch5_q03",
                "type": [
                  "db",
                  "indexes"
                ],
                "prompt": "O que √© um √≠ndice e por que ele acelera leitura mas pode piorar escrita?",
                "difficulty": 2,
                "tags": [],
                "expected": "Estrutura auxiliar para busca; precisa ser atualizada em inserts/updates."
              },
              {
                "id": "ch5_q04",
                "type": [
                  "db",
                  "primary_key"
                ],
                "prompt": "Como escolher uma chave prim√°ria (UUID vs incremental) e quais impactos isso tem?",
                "difficulty": 3,
                "tags": [],
                "expected": "Incremental √© ordenado (√≥timo para B-Tree) mas pode vazar volume; UUID aleat√≥rio cria fragmenta√ß√£o; ULID/KSUID equilibram."
              },
              {
                "id": "ch5_q05",
                "type": [
                  "db",
                  "transactions"
                ],
                "prompt": "O que significa ACID? D√™ um exemplo concreto do que cada letra protege.",
                "difficulty": 2,
                "tags": [],
                "expected": "Atomicidade, Consist√™ncia, Isolamento, Durabilidade; protegem integridade mesmo com falhas."
              },
              {
                "id": "ch5_q06",
                "type": [
                  "db",
                  "isolation"
                ],
                "prompt": "Explique n√≠veis de isolamento e problemas cl√°ssicos (dirty read, phantom read).",
                "difficulty": 3,
                "tags": [],
                "expected": "N√≠veis controlam visibilidade; evitam leituras sujas e fantasmas com locks/MVCC."
              },
              {
                "id": "ch5_q07",
                "type": [
                  "db",
                  "oltp_olap"
                ],
                "prompt": "Diferencie OLTP e OLAP e por que voc√™ n√£o costuma usar o mesmo banco para ambos.",
                "difficulty": 2,
                "tags": [],
                "expected": "OLTP transacional e muitas escritas; OLAP anal√≠tico com scans e agrega√ß√µes; workloads conflitam."
              },
              {
                "id": "ch5_q08",
                "type": [
                  "db",
                  "denormalization"
                ],
                "prompt": "Quando desnormaliza√ß√£o faz sentido? Cite 3 riscos.",
                "difficulty": 3,
                "tags": [],
                "expected": "Leitura r√°pida; riscos: inconsist√™ncia, complexidade de atualiza√ß√£o, mais storage."
              },
              {
                "id": "ch5_q09",
                "type": [
                  "db",
                  "read_replica"
                ],
                "prompt": "O que s√£o read replicas? Como elas afetam consist√™ncia e capacidade?",
                "difficulty": 2,
                "tags": [],
                "expected": "Replicas para leituras; pode haver lag e leituras desatualizadas; aumenta throughput de reads."
              },
              {
                "id": "ch5_q10",
                "type": [
                  "db",
                  "write_scaling"
                ],
                "prompt": "Por que escalar escrita √© mais dif√≠cil que escalar leitura?",
                "difficulty": 2,
                "tags": [],
                "expected": "Escrita exige coordena√ß√£o/consist√™ncia; replica√ß√£o e particionamento s√£o complexos."
              },
              {
                "id": "ch5_q11",
                "type": [
                  "db",
                  "no_sql_types"
                ],
                "prompt": "Cite 4 tipos de bancos NoSQL (key-value, document, column, graph) e um uso t√≠pico.",
                "difficulty": 2,
                "tags": [],
                "expected": "KV cache/sess√£o; documento perfis; coluna/time-series; grafo rela√ß√µes/recomenda√ß√µes."
              },
              {
                "id": "ch5_q12",
                "type": [
                  "data",
                  "event_sourcing"
                ],
                "prompt": "O que √© Event Sourcing e quando ele √© √∫til?",
                "difficulty": 3,
                "tags": [],
                "expected": "Persistir eventos imut√°veis e reconstruir estado; √∫til para auditoria e workflows complexos."
              },
              {
                "id": "ch5_q13",
                "type": [
                  "data",
                  "cdc"
                ],
                "prompt": "O que √© CDC (Change Data Capture) e por que ele √© relevante para integra√ß√µes?",
                "difficulty": 3,
                "tags": [],
                "expected": "Capturar mudan√ßas do DB para streams; integra servi√ßos e analytics com baixo acoplamento."
              },
              {
                "id": "ch5_q14",
                "type": [
                  "db",
                  "schema_migrations"
                ],
                "prompt": "Quais boas pr√°ticas para migrations em produ√ß√£o? (backward compat, expand/contract)",
                "difficulty": 3,
                "tags": [],
                "expected": "Migrations compat√≠veis, expand/contract, feature flags, evitar locks longos, executar em etapas."
              },
              {
                "id": "ch5_q15",
                "type": [
                  "db",
                  "hotspots"
                ],
                "prompt": "O que causa hotspots em banco/shard (ex.: chave crescente) e como mitigar?",
                "difficulty": 3,
                "tags": [],
                "expected": "Concentra√ß√£o de writes; mitigar com chaves distribu√≠das, hashing, batching, particionamento."
              },
              {
                "id": "ch5_q16",
                "type": [
                  "db",
                  "consistency"
                ],
                "prompt": "Explique consist√™ncia de leitura: read-your-writes, monotonic reads, causal consistency.",
                "difficulty": 3,
                "tags": [],
                "expected": "Garantias de visibilidade de writes e ordem de leituras; √∫teis para UX consistente."
              },
              {
                "id": "ch5_q17",
                "type": [
                  "db",
                  "index_selectivity"
                ],
                "prompt": "O que √© seletividade de √≠ndice e por que ela importa?",
                "difficulty": 3,
                "tags": [],
                "expected": "Qu√£o filtrante √©; √≠ndices pouco seletivos podem n√£o ajudar e custam na escrita."
              },
              {
                "id": "ch5_q18",
                "type": [
                  "db",
                  "joins"
                ],
                "prompt": "Por que joins cross-shard s√£o caros? Quais alternativas?",
                "difficulty": 3,
                "tags": [],
                "expected": "Requer coordenar parti√ß√µes; alternativas: denormalizar, materialized views, fan-out app, aggregator."
              },
              {
                "id": "ch5_q19",
                "type": [
                  "db",
                  "constraints"
                ],
                "prompt": "Quando voc√™ escolhe *constraints* (FK, unique) no banco vs validar na aplica√ß√£o?",
                "difficulty": 3,
                "tags": [],
                "expected": "Banco garante invariantes fortes; app pode falhar; mas constraints podem custar performance dependendo do caso."
              },
              {
                "id": "ch5_q20",
                "type": [
                  "db",
                  "applied"
                ],
                "prompt": "Desenhe um schema simples para pedidos e pagamentos e indique quais √≠ndices criaria.",
                "difficulty": 3,
                "tags": [],
                "expected": "Tabelas orders/payments; √≠ndices por order_id, user_id+created_at; unique idempotency_key; status."
              }
            ]
          },
          {
            "chapter": 6,
            "id": "cache_e_cdn",
            "title": "Cache, CDN e Performance",
            "keyTopics": [
              "Cache-aside",
              "Write-through/back",
              "TTL",
              "Cache invalidation",
              "CDN",
              "Hot keys",
              "Warming"
            ],
            "questions": [
              {
                "id": "ch6_q01",
                "type": [
                  "cache",
                  "basics"
                ],
                "prompt": "Explique o padr√£o *cache-aside* e quando ele √© usado.",
                "difficulty": 2,
                "tags": [],
                "expected": "App l√™ do cache; se miss, busca no DB e popula cache; comum por simplicidade."
              },
              {
                "id": "ch6_q02",
                "type": [
                  "cache",
                  "write_through"
                ],
                "prompt": "Compare write-through, write-back e cache-aside.",
                "difficulty": 3,
                "tags": [],
                "expected": "Write-through escreve cache+DB; write-back escreve cache e persiste depois; cache-aside escreve DB e invalida/atualiza cache."
              },
              {
                "id": "ch6_q03",
                "type": [
                  "cache",
                  "invalidation"
                ],
                "prompt": "Por que 'cache invalidation' √© dif√≠cil? Cite 3 estrat√©gias.",
                "difficulty": 3,
                "tags": [],
                "expected": "Mudan√ßas de dados e concorr√™ncia; usar TTL, invalida√ß√£o por evento, versionamento de chaves."
              },
              {
                "id": "ch6_q04",
                "type": [
                  "cache",
                  "ttl"
                ],
                "prompt": "Como escolher TTL? Que riscos existem em TTL muito alto ou muito baixo?",
                "difficulty": 3,
                "tags": [],
                "expected": "Alto: staleness; baixo: baixa taxa de hit e overload no DB."
              },
              {
                "id": "ch6_q05",
                "type": [
                  "cache",
                  "stampede"
                ],
                "prompt": "O que √© *cache stampede* e como evitar?",
                "difficulty": 3,
                "tags": [],
                "expected": "Muitos misses simult√¢neos; evitar com lock/singleflight, jitter em TTL, pre-warm."
              },
              {
                "id": "ch6_q06",
                "type": [
                  "cache",
                  "hot_keys"
                ],
                "prompt": "O que s√£o *hot keys* e por que elas derrubam caches distribu√≠dos?",
                "difficulty": 3,
                "tags": [],
                "expected": "Chaves muito acessadas concentrando carga; mitigar com sharding por key, replica√ß√£o local, caching em camadas."
              },
              {
                "id": "ch6_q07",
                "type": [
                  "cdn",
                  "basics"
                ],
                "prompt": "O que √© CDN e quais problemas ela resolve?",
                "difficulty": 2,
                "tags": [],
                "expected": "Entrega conte√∫do est√°tico perto do usu√°rio; reduz lat√™ncia e egress do origin."
              },
              {
                "id": "ch6_q08",
                "type": [
                  "cdn",
                  "cache_control"
                ],
                "prompt": "Explique `Cache-Control` e como versionamento de assets ajuda.",
                "difficulty": 2,
                "tags": [],
                "expected": "Headers definem cache; assets com hash permitem cache longo sem risco de stale."
              },
              {
                "id": "ch6_q09",
                "type": [
                  "cache",
                  "consistency"
                ],
                "prompt": "Como cache impacta consist√™ncia? Cite 2 garantias que podem se perder.",
                "difficulty": 3,
                "tags": [],
                "expected": "Read-your-writes e monotonic reads podem falhar; leituras podem ficar desatualizadas."
              },
              {
                "id": "ch6_q10",
                "type": [
                  "cache",
                  "multi_layer"
                ],
                "prompt": "Descreva uma estrat√©gia de cache em m√∫ltiplas camadas (client, edge, server).",
                "difficulty": 3,
                "tags": [],
                "expected": "Client cache + CDN edge + cache server (Redis) + DB; cada camada reduz carga/lat√™ncia."
              },
              {
                "id": "ch6_q11",
                "type": [
                  "cache",
                  "eviction"
                ],
                "prompt": "Quais pol√≠ticas de eviction existem (LRU, LFU) e quando cada uma faz sentido?",
                "difficulty": 2,
                "tags": [],
                "expected": "LRU para rec√™ncia; LFU para popularidade; depende do padr√£o de acesso."
              },
              {
                "id": "ch6_q12",
                "type": [
                  "cache",
                  "serialization"
                ],
                "prompt": "Como serializa√ß√£o (JSON vs binary) afeta performance do cache?",
                "difficulty": 2,
                "tags": [],
                "expected": "CPU e tamanho; formatos bin√°rios podem ser menores e mais r√°pidos."
              },
              {
                "id": "ch6_q13",
                "type": [
                  "cache",
                  "negative_cache"
                ],
                "prompt": "O que √© *negative caching*? D√™ um caso √∫til.",
                "difficulty": 3,
                "tags": [],
                "expected": "Cache de 'n√£o existe' por curto tempo; evita bater no DB para ids inv√°lidos repetidos."
              },
              {
                "id": "ch6_q14",
                "type": [
                  "cache",
                  "invalidation_events"
                ],
                "prompt": "Como usar eventos para invalida√ß√£o de cache sem acoplar servi√ßos demais?",
                "difficulty": 3,
                "tags": [],
                "expected": "Publicar eventos de mudan√ßa (CDC) e consumidores atualizam/invalida; usar t√≥picos e schemas est√°veis."
              },
              {
                "id": "ch6_q15",
                "type": [
                  "cache",
                  "write_path"
                ],
                "prompt": "Por que caches geralmente n√£o s√£o *source of truth*? O que acontece se perder o cache?",
                "difficulty": 2,
                "tags": [],
                "expected": "Cache √© derivado; pode ser reconstru√≠do; perder cache aumenta lat√™ncia mas n√£o pode perder dados."
              },
              {
                "id": "ch6_q16",
                "type": [
                  "cdn",
                  "uploads"
                ],
                "prompt": "Como servir arquivos privados via CDN sem expor conte√∫do? (signed URLs/cookies)",
                "difficulty": 3,
                "tags": [],
                "expected": "Assinaturas tempor√°rias e valida√ß√£o; controla acesso e expira√ß√£o."
              },
              {
                "id": "ch6_q17",
                "type": [
                  "cache",
                  "applied"
                ],
                "prompt": "Projete cache para um endpoint GET /profile/{id} com 10k QPS e baixa taxa de atualiza√ß√£o.",
                "difficulty": 3,
                "tags": [],
                "expected": "Cache-aside com Redis, TTL moderado, invalidar em update, singleflight e m√©tricas de hit rate."
              },
              {
                "id": "ch6_q18",
                "type": [
                  "cache",
                  "observability"
                ],
                "prompt": "Quais m√©tricas de cache voc√™ monitora?",
                "difficulty": 2,
                "tags": [],
                "expected": "Hit rate, latency, evictions, memory, errors/timeouts, hot keys, saturation."
              },
              {
                "id": "ch6_q19",
                "type": [
                  "cache",
                  "consistency",
                  "applied"
                ],
                "prompt": "Como garantir 'read-your-writes' para o pr√≥prio usu√°rio mesmo com cache?",
                "difficulty": 3,
                "tags": [],
                "expected": "Bypass cache ap√≥s write, versionar por sess√£o, ou armazenar em cache por user+version/ETag."
              }
            ]
          },
          {
            "chapter": 7,
            "id": "escalabilidade_e_balanceamento",
            "title": "Escalabilidade, Load Balancing e Stateful/Stateless",
            "keyTopics": [
              "Horizontal vs vertical",
              "Load balancer",
              "Autoscaling",
              "Sess√£o",
              "Sticky sessions",
              "Backpressure"
            ],
            "questions": [
              {
                "id": "ch7_q01",
                "type": [
                  "scaling",
                  "lb"
                ],
                "prompt": "O que √© um load balancer e quais algoritmos comuns (round-robin, least-connections)?",
                "difficulty": 2,
                "tags": [],
                "expected": "Distribui tr√°fego; algoritmos escolhem inst√¢ncia com base em regra."
              },
              {
                "id": "ch7_q02",
                "type": [
                  "scaling",
                  "healthcheck"
                ],
                "prompt": "Por que health checks s√£o cr√≠ticos? Diferencie liveness vs readiness.",
                "difficulty": 3,
                "tags": [],
                "expected": "Evita enviar tr√°fego a inst√¢ncias ruins; readiness indica pronto para tr√°fego, liveness indica vivo."
              },
              {
                "id": "ch7_q03",
                "type": [
                  "scaling",
                  "autoscaling"
                ],
                "prompt": "Explique autoscaling por CPU vs por m√©tricas de fila/lat√™ncia. Quando CPU engana?",
                "difficulty": 3,
                "tags": [],
                "expected": "CPU n√£o reflete IO/wait; lat√™ncia e backlog representam melhor satura√ß√£o."
              },
              {
                "id": "ch7_q04",
                "type": [
                  "scaling",
                  "stateless"
                ],
                "prompt": "Como remover estado de inst√¢ncias? Cite 3 tipos de estado comuns.",
                "difficulty": 2,
                "tags": [],
                "expected": "Sess√£o, cache local, uploads tempor√°rios; mover para Redis/DB/object storage."
              },
              {
                "id": "ch7_q05",
                "type": [
                  "scaling",
                  "sticky"
                ],
                "prompt": "O que s√£o sticky sessions e por que elas atrapalham escala e resili√™ncia?",
                "difficulty": 2,
                "tags": [],
                "expected": "LB fixa usu√°rio em inst√¢ncia; dificulta rebalancear e aumenta impacto de falha."
              },
              {
                "id": "ch7_q06",
                "type": [
                  "scaling",
                  "backpressure"
                ],
                "prompt": "O que √© backpressure e por que ele evita colapso em cascata?",
                "difficulty": 3,
                "tags": [],
                "expected": "Controlar entrada quando downstream saturado; evita fila infinita e timeouts em massa."
              },
              {
                "id": "ch7_q07",
                "type": [
                  "scaling",
                  "connection_pool"
                ],
                "prompt": "Como pools de conex√£o podem virar gargalo? Quais m√©tricas observar?",
                "difficulty": 3,
                "tags": [],
                "expected": "Exaust√£o de conex√µes aumenta lat√™ncia; observar pool saturation, wait time, errors."
              },
              {
                "id": "ch7_q08",
                "type": [
                  "scaling",
                  "timeouts"
                ],
                "prompt": "Por que timeouts curtos demais tamb√©m s√£o ruins? Explique o efeito 'retry storm'.",
                "difficulty": 3,
                "tags": [],
                "expected": "Timeouts geram retries em massa; aumenta carga e piora, criando tempestade de retries."
              },
              {
                "id": "ch7_q09",
                "type": [
                  "scaling",
                  "rate_limit"
                ],
                "prompt": "Que tipos de rate limiting existem (per user, per IP, global)?",
                "difficulty": 2,
                "tags": [],
                "expected": "Limites por identidade, origem, token bucket global, por endpoint."
              },
              {
                "id": "ch7_q10",
                "type": [
                  "scaling",
                  "queue_buffer"
                ],
                "prompt": "Quando inserir uma fila entre servi√ßos melhora o sistema? Cite 3 sinais.",
                "difficulty": 2,
                "tags": [],
                "expected": "Picos frequentes, tarefas demoradas, necessidade de retries; desacoplar produtores/consumidores."
              },
              {
                "id": "ch7_q11",
                "type": [
                  "scaling",
                  "batching"
                ],
                "prompt": "Como batching reduz overhead de rede/DB? D√™ um exemplo.",
                "difficulty": 2,
                "tags": [],
                "expected": "Agrupar N opera√ß√µes em 1 chamada; reduz lat√™ncia total e syscalls."
              },
              {
                "id": "ch7_q12",
                "type": [
                  "scaling",
                  "connection_draining"
                ],
                "prompt": "O que √© connection draining e por que √© necess√°rio em deploys?",
                "difficulty": 2,
                "tags": [],
                "expected": "Parar de receber novas conex√µes e terminar as atuais; evita cortar requests no meio."
              },
              {
                "id": "ch7_q13",
                "type": [
                  "scaling",
                  "hotspot"
                ],
                "prompt": "Explique por que um √∫nico endpoint 'pesado' pode derrubar todo o servi√ßo.",
                "difficulty": 3,
                "tags": [],
                "expected": "Compartilha recursos; satura√ß√£o causa fila e aumenta lat√™ncia global; mitigar com isolamento e limites."
              },
              {
                "id": "ch7_q14",
                "type": [
                  "scaling",
                  "multi_region"
                ],
                "prompt": "Quando multi-regi√£o vale a pena? Quais complexidades adiciona?",
                "difficulty": 3,
                "tags": [],
                "expected": "HA e lat√™ncia global; adiciona replica√ß√£o, consist√™ncia, failover e custos."
              },
              {
                "id": "ch7_q15",
                "type": [
                  "scaling",
                  "stateful_services"
                ],
                "prompt": "D√™ exemplos de servi√ßos stateful e como escal√°-los.",
                "difficulty": 3,
                "tags": [],
                "expected": "DB, Kafka, Redis; escalar com sharding/replica√ß√£o e particionamento."
              },
              {
                "id": "ch7_q16",
                "type": [
                  "scaling",
                  "applied"
                ],
                "prompt": "Desenhe uma arquitetura 'stateless web tier' com sess√£o e uploads.",
                "difficulty": 3,
                "tags": [],
                "expected": "LB ‚Üí stateless app ‚Üí Redis para sess√£o; object storage para uploads; DB como source of truth."
              },
              {
                "id": "ch7_q17",
                "type": [
                  "scaling",
                  "traffic_shaping"
                ],
                "prompt": "O que √© *traffic shaping* e por que ele ajuda em incidentes?",
                "difficulty": 3,
                "tags": [],
                "expected": "Controlar taxa por prioridade; mant√©m core funcionando e degrada features menos cr√≠ticas."
              },
              {
                "id": "ch7_q18",
                "type": [
                  "scaling",
                  "graceful_degradation"
                ],
                "prompt": "D√™ um exemplo de degrada√ß√£o graciosa em e-commerce.",
                "difficulty": 2,
                "tags": [],
                "expected": "Desativar recomenda√ß√µes/busca avan√ßada e manter checkout; usar cache e p√°ginas est√°ticas."
              },
              {
                "id": "ch7_q19",
                "type": [
                  "scaling",
                  "applied"
                ],
                "prompt": "Se seu DB suporta 5k writes/s e o pico √© 20k/s, o que voc√™ faz?",
                "difficulty": 3,
                "tags": [],
                "expected": "Fila/buffering, batching, sharding, reduzir writes (eventual), separar workloads e otimizar schema/√≠ndices."
              },
              {
                "id": "ch7_q20",
                "type": [
                  "scaling",
                  "capacity"
                ],
                "prompt": "O que √© capacity planning cont√≠nuo e quais sinais acionam replanejamento?",
                "difficulty": 2,
                "tags": [],
                "expected": "Monitorar crescimento/satura√ß√£o; aciona por uso > X%, p95 subindo, backlog, custo anormal."
              }
            ]
          },
          {
            "chapter": 8,
            "id": "consistencia_e_replicacao",
            "title": "Consist√™ncia, Replica√ß√£o e CAP/PACELC",
            "keyTopics": [
              "CAP",
              "PACELC",
              "Qu√≥rum",
              "Consist√™ncia eventual",
              "Consist√™ncia forte",
              "Read-after-write",
              "Staleness"
            ],
            "questions": [
              {
                "id": "ch8_q01",
                "type": [
                  "distributed",
                  "cap"
                ],
                "prompt": "Explique CAP: Consistency, Availability, Partition tolerance. Por que P √© inevit√°vel?",
                "difficulty": 3,
                "tags": [],
                "expected": "Parti√ß√µes acontecem; em presen√ßa de parti√ß√£o escolhe C ou A para opera√ß√µes."
              },
              {
                "id": "ch8_q02",
                "type": [
                  "distributed",
                  "pacelc"
                ],
                "prompt": "O que √© PACELC e como ele complementa CAP?",
                "difficulty": 3,
                "tags": [],
                "expected": "Se P: escolhe A ou C; Else: trade-off entre Lat√™ncia (L) e Consist√™ncia (C)."
              },
              {
                "id": "ch8_q03",
                "type": [
                  "distributed",
                  "replication"
                ],
                "prompt": "Compare replica√ß√£o s√≠ncrona vs ass√≠ncrona.",
                "difficulty": 2,
                "tags": [],
                "expected": "S√≠ncrona garante consist√™ncia mas aumenta lat√™ncia; ass√≠ncrona √© r√°pida mas pode perder reads-your-writes."
              },
              {
                "id": "ch8_q04",
                "type": [
                  "distributed",
                  "quorum"
                ],
                "prompt": "O que √© qu√≥rum de leitura/escrita (R/W/N)? D√™ um exemplo com N=3.",
                "difficulty": 3,
                "tags": [],
                "expected": "Se R+W>N, leitura v√™ √∫ltimo write; ex: N=3, W=2, R=2."
              },
              {
                "id": "ch8_q05",
                "type": [
                  "distributed",
                  "leader_follower"
                ],
                "prompt": "Explique l√≠der-seguidor (primary-replica) e seus pr√≥s/cons.",
                "difficulty": 2,
                "tags": [],
                "expected": "Escritas no l√≠der; replicas para leitura; simples mas l√≠der pode ser gargalo e failover complexo."
              },
              {
                "id": "ch8_q06",
                "type": [
                  "distributed",
                  "multi_leader"
                ],
                "prompt": "Quando multi-leader faz sentido e quais conflitos aparecem?",
                "difficulty": 3,
                "tags": [],
                "expected": "Multi-regi√£o/offline; conflitos de escrita exigem resolu√ß√£o (last-write-wins, CRDT, app logic)."
              },
              {
                "id": "ch8_q07",
                "type": [
                  "distributed",
                  "read_after_write"
                ],
                "prompt": "Como garantir read-after-write em arquitetura com read replicas?",
                "difficulty": 3,
                "tags": [],
                "expected": "Ler do l√≠der ap√≥s write, usar session stickiness, tokens/LSN, ou esperar r√©plica alcan√ßar."
              },
              {
                "id": "ch8_q08",
                "type": [
                  "distributed",
                  "clock"
                ],
                "prompt": "Por que rel√≥gios (clock skew) atrapalham ordena√ß√£o de eventos?",
                "difficulty": 3,
                "tags": [],
                "expected": "Timestamps n√£o confi√°veis; pode reordenar eventos; usar clocks l√≥gicos/monotonic e offsets."
              },
              {
                "id": "ch8_q09",
                "type": [
                  "distributed",
                  "consistency_models"
                ],
                "prompt": "Defina: linearizability, sequential consistency, causal consistency.",
                "difficulty": 3,
                "tags": [],
                "expected": "N√≠veis de consist√™ncia; lineariz√°vel √© mais forte, causal preserva causalidade sem total order."
              },
              {
                "id": "ch8_q10",
                "type": [
                  "distributed",
                  "staleness"
                ],
                "prompt": "O que √© *staleness* e como medir/limitar (bounded staleness)?",
                "difficulty": 3,
                "tags": [],
                "expected": "Qu√£o desatualizado; limitar por tempo/vers√£o; medir lag e expor m√©tricas."
              },
              {
                "id": "ch8_q11",
                "type": [
                  "distributed",
                  "availability_math"
                ],
                "prompt": "Explique como redund√¢ncia em s√©rie vs em paralelo afeta disponibilidade.",
                "difficulty": 2,
                "tags": [],
                "expected": "Em s√©rie piora; em paralelo melhora (failover) se independentes."
              },
              {
                "id": "ch8_q12",
                "type": [
                  "distributed",
                  "split_brain"
                ],
                "prompt": "O que √© split-brain e como evitar?",
                "difficulty": 3,
                "tags": [],
                "expected": "Dois l√≠deres simult√¢neos; evitar com quorum/consenso (Raft/Paxos) e fencing tokens."
              },
              {
                "id": "ch8_q13",
                "type": [
                  "distributed",
                  "consensus"
                ],
                "prompt": "Por que consenso (Raft/Paxos) √© caro? O que ele garante?",
                "difficulty": 3,
                "tags": [],
                "expected": "Exige coordena√ß√£o e m√∫ltiplos round-trips; garante ordem e decis√£o √∫nica (l√≠der/log)."
              },
              {
                "id": "ch8_q14",
                "type": [
                  "distributed",
                  "applied"
                ],
                "prompt": "Qual n√≠vel de consist√™ncia voc√™ escolheria para: saldo, feed, contador de likes? Justifique.",
                "difficulty": 3,
                "tags": [],
                "expected": "Saldo forte; feed eventual; likes pode ser eventual/approx."
              },
              {
                "id": "ch8_q15",
                "type": [
                  "distributed",
                  "failure_modes"
                ],
                "prompt": "Liste 6 falhas comuns em distribu√≠dos (parti√ß√£o, overload, GC pause...) e uma mitiga√ß√£o.",
                "difficulty": 3,
                "tags": [],
                "expected": "Timeouts, retries com jitter, circuit breaker, autoscaling, backpressure, isolamento, observabilidade."
              },
              {
                "id": "ch8_q16",
                "type": [
                  "distributed",
                  "applied"
                ],
                "prompt": "Descreva como um sistema com consist√™ncia eventual converge (gossip/anti-entropy).",
                "difficulty": 3,
                "tags": [],
                "expected": "R√©plicas trocam deltas e resolvem conflitos; convergem com trocas peri√≥dicas."
              }
            ]
          },
          {
            "chapter": 9,
            "id": "particionamento_e_sharding",
            "title": "Particionamento, Sharding e Hotspots",
            "keyTopics": [
              "Sharding por range/hash",
              "Rebalanceamento",
              "Hot partitions",
              "Routing",
              "Consistent hashing",
              "Resharding"
            ],
            "questions": [
              {
                "id": "ch9_q01",
                "type": [
                  "sharding",
                  "basics"
                ],
                "prompt": "O que √© sharding e por que ele √© usado?",
                "difficulty": 2,
                "tags": [],
                "expected": "Dividir dados entre n√≥s para escalar escrita/armazenamento e reduzir carga por n√≥."
              },
              {
                "id": "ch9_q02",
                "type": [
                  "sharding",
                  "hash_range"
                ],
                "prompt": "Compare sharding por hash vs por range: pr√≥s e contras.",
                "difficulty": 3,
                "tags": [],
                "expected": "Hash distribui bem mas dificulta range queries; range facilita ranges mas pode criar hotspots."
              },
              {
                "id": "ch9_q03",
                "type": [
                  "sharding",
                  "consistent_hash"
                ],
                "prompt": "O que √© consistent hashing e por que ele ajuda em rebalanceamento?",
                "difficulty": 3,
                "tags": [],
                "expected": "Minimiza chaves movidas quando n√≥s entram/saem; reduz custo de rehash total."
              },
              {
                "id": "ch9_q04",
                "type": [
                  "sharding",
                  "routing"
                ],
                "prompt": "Como o roteamento para o shard correto funciona? Cite 2 estrat√©gias.",
                "difficulty": 2,
                "tags": [],
                "expected": "Shard map/metadata service; hashing determin√≠stico; directory-based routing."
              },
              {
                "id": "ch9_q05",
                "type": [
                  "sharding",
                  "reshard"
                ],
                "prompt": "O que √© resharding e por que √© arriscado em produ√ß√£o?",
                "difficulty": 3,
                "tags": [],
                "expected": "Redistribuir dados; risco de inconsist√™ncia e downtime; requer migra√ß√£o incremental e dual-write."
              },
              {
                "id": "ch9_q06",
                "type": [
                  "sharding",
                  "hot_partition"
                ],
                "prompt": "O que √© uma hot partition? Cite causas e mitigac√µes.",
                "difficulty": 3,
                "tags": [],
                "expected": "Concentra√ß√£o de acessos; mitigar com salting, hashing, caching e particionar por outra dimens√£o."
              },
              {
                "id": "ch9_q07",
                "type": [
                  "sharding",
                  "secondary_index"
                ],
                "prompt": "Por que √≠ndices secund√°rios s√£o dif√≠ceis em sharded DB?",
                "difficulty": 3,
                "tags": [],
                "expected": "Precisa buscar em m√∫ltiplos shards; usar global index, denormaliza√ß√£o ou search engine."
              },
              {
                "id": "ch9_q08",
                "type": [
                  "sharding",
                  "multi_tenant"
                ],
                "prompt": "Como particionar dados em multi-tenant (por tenant id) e quais riscos existem?",
                "difficulty": 3,
                "tags": [],
                "expected": "Isolamento; risco de tenants grandes; usar sub-sharding e quotas."
              },
              {
                "id": "ch9_q09",
                "type": [
                  "sharding",
                  "transactions"
                ],
                "prompt": "Por que transa√ß√µes cross-shard s√£o caras? Quais alternativas pr√°ticas?",
                "difficulty": 3,
                "tags": [],
                "expected": "Coordena√ß√£o/2PC; alternativas: modelagem para evitar, sagas, outbox, agrega√ß√£o eventual."
              },
              {
                "id": "ch9_q10",
                "type": [
                  "sharding",
                  "rebalancing"
                ],
                "prompt": "Explique migra√ß√£o incremental de shards (chunking, dual-read, cutover).",
                "difficulty": 3,
                "tags": [],
                "expected": "Mover por chunks, ler de ambos durante migra√ß√£o, validar, e cortar para novo shard."
              },
              {
                "id": "ch9_q11",
                "type": [
                  "sharding",
                  "applied"
                ],
                "prompt": "Voc√™ tem chave `userId`. Quais riscos de particionar por userId em um feed com celebridades?",
                "difficulty": 3,
                "tags": [],
                "expected": "Hot users (celebridades) geram hotspots; feed exige fan-out; usar particionamento por postagem ou timeline service."
              },
              {
                "id": "ch9_q12",
                "type": [
                  "sharding",
                  "geo"
                ],
                "prompt": "Quando sharding geogr√°fico faz sentido? Quais cuidados com compliance?",
                "difficulty": 3,
                "tags": [],
                "expected": "Lat√™ncia e legisla√ß√£o; manter dados na regi√£o, replica√ß√£o e roteamento por pa√≠s/regi√£o."
              },
              {
                "id": "ch9_q13",
                "type": [
                  "sharding",
                  "storage"
                ],
                "prompt": "Como estimar 'tamanho do shard' e quando dividir um shard grande?",
                "difficulty": 2,
                "tags": [],
                "expected": "Limites de storage/IO; dividir ao atingir thresholds de lat√™ncia/IOPS/size."
              },
              {
                "id": "ch9_q14",
                "type": [
                  "sharding",
                  "id_generation"
                ],
                "prompt": "Como gerar IDs orden√°veis em um ambiente sharded (Snowflake/ULID)?",
                "difficulty": 3,
                "tags": [],
                "expected": "IDs com timestamp+node+sequ√™ncia; orden√°veis e √∫nicos sem coordena√ß√£o central."
              },
              {
                "id": "ch9_q15",
                "type": [
                  "sharding",
                  "applied"
                ],
                "prompt": "Desenhe uma estrat√©gia para evitar hotspot em chave incremental (ex.: order_id).",
                "difficulty": 3,
                "tags": [],
                "expected": "Usar IDs distribu√≠dos (ULID), prefix salting, ou range pre-splitting."
              },
              {
                "id": "ch9_q16",
                "type": [
                  "sharding",
                  "operacao"
                ],
                "prompt": "Que m√©tricas voc√™ observa por shard para decidir rebalanceamento?",
                "difficulty": 2,
                "tags": [],
                "expected": "QPS, lat√™ncia, CPU, IOPS, tamanho, erro, hot keys e skew de distribui√ß√£o."
              }
            ]
          },
          {
            "chapter": 10,
            "id": "mensageria_e_eventos",
            "title": "Mensageria, Eventos e Processamento Ass√≠ncrono",
            "keyTopics": [
              "Queues",
              "Pub/Sub",
              "Streams",
              "Ordering",
              "At-least-once",
              "Exactly-once (na pr√°tica)",
              "DLQ",
              "Idempot√™ncia"
            ],
            "questions": [
              {
                "id": "ch10_q01",
                "type": [
                  "messaging",
                  "queue_pubsub"
                ],
                "prompt": "Qual a diferen√ßa entre queue e pub/sub?",
                "difficulty": 2,
                "tags": [],
                "expected": "Queue: cada mensagem para um consumidor; pub/sub: broadcast para v√°rios subscribers."
              },
              {
                "id": "ch10_q02",
                "type": [
                  "messaging",
                  "delivery"
                ],
                "prompt": "Explique at-most-once, at-least-once e exactly-once (e por que o √∫ltimo √© dif√≠cil).",
                "difficulty": 3,
                "tags": [],
                "expected": "Sem duplicatas mas pode perder; sem perdas mas pode duplicar; exactly-once exige coordena√ß√£o/txn e √© caro."
              },
              {
                "id": "ch10_q03",
                "type": [
                  "messaging",
                  "ordering"
                ],
                "prompt": "O que √© ordering e como particionamento afeta ordena√ß√£o em streams (ex.: Kafka)?",
                "difficulty": 3,
                "tags": [],
                "expected": "Ordena√ß√£o garantida por parti√ß√£o; chaves definem parti√ß√£o e ordena√ß√£o local."
              },
              {
                "id": "ch10_q04",
                "type": [
                  "messaging",
                  "dlq"
                ],
                "prompt": "O que √© DLQ e quando usar?",
                "difficulty": 2,
                "tags": [],
                "expected": "Fila de mensagens que falharam repetidamente; permite inspe√ß√£o e reprocessamento."
              },
              {
                "id": "ch10_q05",
                "type": [
                  "messaging",
                  "retries"
                ],
                "prompt": "Por que retries precisam de backoff e jitter em consumidores?",
                "difficulty": 3,
                "tags": [],
                "expected": "Evita sincronizar tentativas e sobrecarregar downstream; reduz tempestade de retries."
              },
              {
                "id": "ch10_q06",
                "type": [
                  "messaging",
                  "idempotency"
                ],
                "prompt": "Como garantir idempot√™ncia no consumidor? Cite 2 t√©cnicas.",
                "difficulty": 3,
                "tags": [],
                "expected": "Deduplica√ß√£o por message-id, upserts com chave natural, ou registrar processamento (inbox table)."
              },
              {
                "id": "ch10_q07",
                "type": [
                  "messaging",
                  "outbox"
                ],
                "prompt": "Explique o padr√£o Outbox para publicar eventos sem perder consist√™ncia.",
                "difficulty": 3,
                "tags": [],
                "expected": "Escrever evento em tabela outbox na mesma transa√ß√£o do estado; relay publica para broker."
              },
              {
                "id": "ch10_q08",
                "type": [
                  "messaging",
                  "sagas"
                ],
                "prompt": "Como sagas usam eventos para coordenar transa√ß√µes distribu√≠das?",
                "difficulty": 3,
                "tags": [],
                "expected": "Passos locais + eventos + compensa√ß√µes; orquestra√ß√£o ou coreografia."
              },
              {
                "id": "ch10_q09",
                "type": [
                  "messaging",
                  "backpressure"
                ],
                "prompt": "Como lidar com consumidores mais lentos que produtores?",
                "difficulty": 3,
                "tags": [],
                "expected": "Escalar consumidores, pausar produ√ß√£o, aplicar backpressure, aumentar parti√ß√µes e controlar QoS."
              },
              {
                "id": "ch10_q10",
                "type": [
                  "messaging",
                  "schema_registry"
                ],
                "prompt": "Por que versionar schemas de eventos √© cr√≠tico em event-driven?",
                "difficulty": 3,
                "tags": [],
                "expected": "Evolu√ß√£o sem quebrar consumidores; compatibilidade backward/forward."
              },
              {
                "id": "ch10_q11",
                "type": [
                  "messaging",
                  "poison_pill"
                ],
                "prompt": "O que √© uma 'poison pill message' e como trat√°-la?",
                "difficulty": 3,
                "tags": [],
                "expected": "Mensagem sempre falha; mover para DLQ, quarantine e corrigir dados/bug."
              },
              {
                "id": "ch10_q12",
                "type": [
                  "messaging",
                  "exactly_once_practice"
                ],
                "prompt": "Na pr√°tica, como voc√™ obt√©m 'effectively-once'?",
                "difficulty": 3,
                "tags": [],
                "expected": "At-least-once + idempot√™ncia + dedupe + transa√ß√µes locais; aceitar duplicatas controladas."
              },
              {
                "id": "ch10_q13",
                "type": [
                  "messaging",
                  "stream_vs_queue"
                ],
                "prompt": "Quando usar stream (Kafka) vs queue tradicional (Rabbit/SQS)?",
                "difficulty": 2,
                "tags": [],
                "expected": "Stream para reten√ß√£o/replay e m√∫ltiplos consumidores; queue para tarefas simples e TTL/visibilidade."
              },
              {
                "id": "ch10_q14",
                "type": [
                  "messaging",
                  "visibility_timeout"
                ],
                "prompt": "Explique 'visibility timeout' em filas e o risco se ele for mal configurado.",
                "difficulty": 3,
                "tags": [],
                "expected": "Mensagem reaparece se n√£o ack; curto duplica, longo atrasa reprocesso; ajustar ao tempo de processamento."
              },
              {
                "id": "ch10_q15",
                "type": [
                  "messaging",
                  "applied"
                ],
                "prompt": "Desenhe pipeline de eventos para 'Notifica√ß√µes': eventos ‚Üí regras ‚Üí envio ‚Üí tracking.",
                "difficulty": 3,
                "tags": [],
                "expected": "Producer publica; processor aplica prefer√™ncias; sender por canal; tracking event e DLQ."
              },
              {
                "id": "ch10_q16",
                "type": [
                  "messaging",
                  "applied"
                ],
                "prompt": "Como reprocessar eventos antigos sem derrubar o sistema?",
                "difficulty": 3,
                "tags": [],
                "expected": "Replays em baixa prioridade, rate limit, ambientes dedicados, e valida√ß√£o incremental."
              }
            ]
          },
          {
            "chapter": 11,
            "id": "arquiteturas_de_servicos",
            "title": "Arquiteturas de Servi√ßos (Mon√≥lito, Modular, Microservices)",
            "keyTopics": [
              "Modular monolith",
              "Microservices",
              "Service discovery",
              "API Gateway",
              "BFF",
              "Bounded contexts"
            ],
            "questions": [
              {
                "id": "ch11_q01",
                "type": [
                  "architecture",
                  "monolith"
                ],
                "prompt": "O que √© um mon√≥lito modular e por que ele pode ser uma boa escolha inicial?",
                "difficulty": 2,
                "tags": [],
                "expected": "Um deploy, m√≥dulos bem separados; reduz overhead de microservices mantendo boa organiza√ß√£o."
              },
              {
                "id": "ch11_q02",
                "type": [
                  "architecture",
                  "microservices"
                ],
                "prompt": "Quais benef√≠cios e custos de microservices? Liste 4 de cada.",
                "difficulty": 3,
                "tags": [],
                "expected": "Benef√≠cios: escala por servi√ßo, autonomia, deploy independente, isolamento. Custos: rede, observabilidade, coordena√ß√£o, consist√™ncia."
              },
              {
                "id": "ch11_q03",
                "type": [
                  "architecture",
                  "bounded_context"
                ],
                "prompt": "O que √© bounded context (DDD) e como ele ajuda na divis√£o de servi√ßos?",
                "difficulty": 3,
                "tags": [],
                "expected": "Define fronteiras de dom√≠nio e linguagem; reduz acoplamento e ambiguidade entre times."
              },
              {
                "id": "ch11_q04",
                "type": [
                  "architecture",
                  "gateway_bff"
                ],
                "prompt": "Explique API Gateway vs BFF. Quando usar BFF?",
                "difficulty": 3,
                "tags": [],
                "expected": "Gateway √© entrada comum; BFF √© backend por frontend para otimizar payloads e reduzir chatty calls."
              },
              {
                "id": "ch11_q05",
                "type": [
                  "architecture",
                  "service_discovery"
                ],
                "prompt": "O que √© service discovery (client-side vs server-side)?",
                "difficulty": 3,
                "tags": [],
                "expected": "Descobrir endpoints dinamicamente; client-side usa registry; server-side via LB/mesh."
              },
              {
                "id": "ch11_q06",
                "type": [
                  "architecture",
                  "config"
                ],
                "prompt": "Como gerenciar configura√ß√£o e segredos em muitos servi√ßos?",
                "difficulty": 3,
                "tags": [],
                "expected": "Config service, env vars, vault/secrets manager, rota√ß√£o, least privilege e auditoria."
              },
              {
                "id": "ch11_q07",
                "type": [
                  "architecture",
                  "sync_async"
                ],
                "prompt": "Quando preferir comunica√ß√£o s√≠ncrona vs ass√≠ncrona entre servi√ßos?",
                "difficulty": 3,
                "tags": [],
                "expected": "S√≠ncrona para requisi√ß√µes imediatas; ass√≠ncrona para desacoplamento, picos e workflows longos."
              },
              {
                "id": "ch11_q08",
                "type": [
                  "architecture",
                  "sagas"
                ],
                "prompt": "D√™ um exemplo de workflow multi-servi√ßo e como implement√°-lo com saga.",
                "difficulty": 3,
                "tags": [],
                "expected": "Pedido‚Üípagamento‚Üíestoque‚Üíenvio; eventos e compensa√ß√µes (cancelar pagamento, repor estoque)."
              },
              {
                "id": "ch11_q09",
                "type": [
                  "architecture",
                  "data_ownership"
                ],
                "prompt": "Por que 'um servi√ßo deve ser dono do seu dado'?",
                "difficulty": 3,
                "tags": [],
                "expected": "Evita acoplamento por DB compartilhado; reduz conflitos e melhora autonomia/escala."
              },
              {
                "id": "ch11_q10",
                "type": [
                  "architecture",
                  "shared_db"
                ],
                "prompt": "Quando DB compartilhado pode ser aceit√°vel (e como reduzir riscos)?",
                "difficulty": 3,
                "tags": [],
                "expected": "Times pequenos/MVP; reduzir riscos com schemas separados, contratos, e migra√ß√£o futura planejada."
              },
              {
                "id": "ch11_q11",
                "type": [
                  "architecture",
                  "service_mesh"
                ],
                "prompt": "O que um service mesh oferece (mTLS, retries, tracing) e quais custos?",
                "difficulty": 3,
                "tags": [],
                "expected": "Infra para pol√≠ticas de rede; custos de complexidade, lat√™ncia e opera√ß√£o."
              },
              {
                "id": "ch11_q12",
                "type": [
                  "architecture",
                  "applied"
                ],
                "prompt": "Quais sinais indicam que voc√™ deve sair de mon√≥lito para microservices?",
                "difficulty": 3,
                "tags": [],
                "expected": "Deploys lentos, times bloqueando, dom√≠nios independentes, necessidades de escala diferentes."
              },
              {
                "id": "ch11_q13",
                "type": [
                  "architecture",
                  "observability"
                ],
                "prompt": "Por que observabilidade √© mais dif√≠cil em microservices?",
                "difficulty": 2,
                "tags": [],
                "expected": "Chamadas distribu√≠das exigem tracing/correlation; mais pontos de falha e m√©tricas."
              },
              {
                "id": "ch11_q14",
                "type": [
                  "architecture",
                  "contract_testing"
                ],
                "prompt": "O que √© contract testing (consumer-driven) e quando ajuda?",
                "difficulty": 3,
                "tags": [],
                "expected": "Garante compatibilidade entre producer/consumer; reduz quebras em deploys independentes."
              },
              {
                "id": "ch11_q15",
                "type": [
                  "architecture",
                  "migration"
                ],
                "prompt": "Explique o padr√£o *Strangler Fig* para migrar um mon√≥lito.",
                "difficulty": 3,
                "tags": [],
                "expected": "Extrair funcionalidades gradualmente atr√°s de proxy/gateway; substituir por partes sem big-bang."
              },
              {
                "id": "ch11_q16",
                "type": [
                  "architecture",
                  "applied"
                ],
                "prompt": "Desenhe uma arquitetura para 'Cat√°logo + Carrinho + Checkout' com servi√ßos e integra√ß√µes.",
                "difficulty": 3,
                "tags": [],
                "expected": "Servi√ßos separados; checkout orquestra; eventos para estoque/entrega; gateway/BFF para frontend."
              }
            ]
          },
          {
            "chapter": 12,
            "id": "resiliencia_e_confiabilidade",
            "title": "Resili√™ncia e Confiabilidade (SRE Patterns)",
            "keyTopics": [
              "Timeouts",
              "Retries",
              "Circuit breaker",
              "Bulkhead",
              "Rate limiting",
              "Fallbacks",
              "Chaos",
              "Degrada√ß√£o graciosa"
            ],
            "questions": [
              {
                "id": "ch12_q01",
                "type": [
                  "reliability",
                  "timeouts"
                ],
                "prompt": "Como escolher timeouts por chamada e por request end-to-end?",
                "difficulty": 3,
                "tags": [],
                "expected": "Budget total; timeouts menores a montante; considerar retries e cauda."
              },
              {
                "id": "ch12_q02",
                "type": [
                  "reliability",
                  "retries"
                ],
                "prompt": "Explique retry com backoff exponencial e jitter. Por que jitter √© crucial?",
                "difficulty": 3,
                "tags": [],
                "expected": "Espa√ßa tentativas; jitter evita sincroniza√ß√£o de clientes e picos peri√≥dicos."
              },
              {
                "id": "ch12_q03",
                "type": [
                  "reliability",
                  "circuit_breaker"
                ],
                "prompt": "O que √© circuit breaker e quais estados ele possui?",
                "difficulty": 2,
                "tags": [],
                "expected": "Protege de falhas downstream; estados: closed, open, half-open."
              },
              {
                "id": "ch12_q04",
                "type": [
                  "reliability",
                  "bulkhead"
                ],
                "prompt": "Explique bulkhead e d√™ um exemplo (pools separados por funcionalidade).",
                "difficulty": 3,
                "tags": [],
                "expected": "Isolar recursos; evitar que uma parte derrube tudo; ex: pool para pagamento separado de recomenda√ß√£o."
              },
              {
                "id": "ch12_q05",
                "type": [
                  "reliability",
                  "fallback"
                ],
                "prompt": "O que √© fallback e qual o risco de fallback incorreto?",
                "difficulty": 3,
                "tags": [],
                "expected": "Resposta alternativa; risco de servir dados errados e mascarar incidentes."
              },
              {
                "id": "ch12_q06",
                "type": [
                  "reliability",
                  "load_shed"
                ],
                "prompt": "Explique load shedding e quando aplicar.",
                "difficulty": 3,
                "tags": [],
                "expected": "Rejeitar/degradar tr√°fego para manter core; aplicar quando saturado e error budget amea√ßado."
              },
              {
                "id": "ch12_q07",
                "type": [
                  "reliability",
                  "rate_limit"
                ],
                "prompt": "Compare token bucket vs leaky bucket e um caso para cada.",
                "difficulty": 3,
                "tags": [],
                "expected": "Token bucket permite bursts; leaky suaviza; escolher conforme necessidade de burst."
              },
              {
                "id": "ch12_q08",
                "type": [
                  "reliability",
                  "idempotency"
                ],
                "prompt": "Por que idempot√™ncia √© base para retries seguros?",
                "difficulty": 2,
                "tags": [],
                "expected": "Sem idempot√™ncia, retries duplicam efeitos (cobran√ßa dupla, pedidos duplicados)."
              },
              {
                "id": "ch12_q09",
                "type": [
                  "reliability",
                  "failover"
                ],
                "prompt": "Explique failover ativo-passivo vs ativo-ativo.",
                "difficulty": 3,
                "tags": [],
                "expected": "Ativo-passivo simples mas com RTO maior; ativo-ativo mais complexo e caro, melhor uso de recursos."
              },
              {
                "id": "ch12_q10",
                "type": [
                  "reliability",
                  "dr"
                ],
                "prompt": "Defina RPO e RTO e d√™ exemplos de metas t√≠picas.",
                "difficulty": 3,
                "tags": [],
                "expected": "RPO perda de dados aceit√°vel; RTO tempo para recuperar; variam por criticidade."
              },
              {
                "id": "ch12_q11",
                "type": [
                  "reliability",
                  "chaos"
                ],
                "prompt": "O que √© chaos engineering e quais experimentos b√°sicos voc√™ faria?",
                "difficulty": 3,
                "tags": [],
                "expected": "Injetar falhas controladas: desligar inst√¢ncia, lat√™ncia, perda de rede, falha de DB; validar resili√™ncia."
              },
              {
                "id": "ch12_q12",
                "type": [
                  "reliability",
                  "graceful_shutdown"
                ],
                "prompt": "O que √© graceful shutdown e por que √© importante em deploys e autoscaling?",
                "difficulty": 2,
                "tags": [],
                "expected": "Encerrar sem interromper requests; permite drains e evita erros 5xx."
              },
              {
                "id": "ch12_q13",
                "type": [
                  "reliability",
                  "thundering_herd"
                ],
                "prompt": "Explique thundering herd e mitiga√ß√£o.",
                "difficulty": 3,
                "tags": [],
                "expected": "Muitos clientes acordam ao mesmo tempo; usar jitter, cache, rate limits e filas."
              },
              {
                "id": "ch12_q14",
                "type": [
                  "reliability",
                  "applied"
                ],
                "prompt": "Voc√™ tem p99 subindo e erros 5xx em cascata. Qual checklist de mitiga√ß√£o imediata?",
                "difficulty": 3,
                "tags": [],
                "expected": "Ativar rate limit/load shedding, reduzir features pesadas, aumentar capacity, desabilitar retries agressivos, checar DB/queues."
              },
              {
                "id": "ch12_q15",
                "type": [
                  "reliability",
                  "slo"
                ],
                "prompt": "Como um SLO influencia decis√µes de arquitetura (ex.: multi-az, multi-region)?",
                "difficulty": 3,
                "tags": [],
                "expected": "SLO mais alto exige redund√¢ncia e automa√ß√£o; aumenta custo e complexidade."
              },
              {
                "id": "ch12_q16",
                "type": [
                  "reliability",
                  "postmortem"
                ],
                "prompt": "O que deve conter um postmortem sem culpa (blameless)?",
                "difficulty": 2,
                "tags": [],
                "expected": "Timeline, impacto, causa raiz, a√ß√µes corretivas/preventivas, li√ß√µes e follow-up."
              }
            ]
          },
          {
            "chapter": 13,
            "id": "observabilidade",
            "title": "Observabilidade e Opera√ß√£o",
            "keyTopics": [
              "Logs",
              "M√©tricas",
              "Tracing",
              "Alertas",
              "Dashboards",
              "Runbooks",
              "Postmortem"
            ],
            "questions": [
              {
                "id": "ch13_q01",
                "type": [
                  "observability",
                  "logs"
                ],
                "prompt": "Quais campos s√£o essenciais em logs estruturados (JSON)?",
                "difficulty": 2,
                "tags": [],
                "expected": "timestamp, level, service, request_id/trace_id, user/tenant, message, error_code, latency."
              },
              {
                "id": "ch13_q02",
                "type": [
                  "observability",
                  "metrics"
                ],
                "prompt": "Diferencie m√©tricas de *golden signals*: latency, traffic, errors, saturation.",
                "difficulty": 2,
                "tags": [],
                "expected": "Quatro sinais para sa√∫de: lat√™ncia, tr√°fego, erros e satura√ß√£o."
              },
              {
                "id": "ch13_q03",
                "type": [
                  "observability",
                  "tracing"
                ],
                "prompt": "O que √© distributed tracing e como ele ajuda em fan-out?",
                "difficulty": 2,
                "tags": [],
                "expected": "Rastreia spans; identifica gargalos e call chains; mostra onde o tempo √© gasto."
              },
              {
                "id": "ch13_q04",
                "type": [
                  "observability",
                  "cardinality"
                ],
                "prompt": "Por que alta cardinalidade em m√©tricas √© perigosa?",
                "difficulty": 3,
                "tags": [],
                "expected": "Explode s√©ries temporais, custo e performance; usar labels com cuidado."
              },
              {
                "id": "ch13_q05",
                "type": [
                  "observability",
                  "alerts"
                ],
                "prompt": "Como desenhar alertas acion√°veis (signal vs noise)?",
                "difficulty": 3,
                "tags": [],
                "expected": "Baseado em SLO e sintomas; evitar alertas por m√©tricas de causa; usar burn rate."
              },
              {
                "id": "ch13_q06",
                "type": [
                  "observability",
                  "slo_burn"
                ],
                "prompt": "Explique 'burn rate' de error budget com um exemplo simples.",
                "difficulty": 3,
                "tags": [],
                "expected": "Consumo acelerado do budget; se queima r√°pido, incidentes precisam a√ß√£o imediata."
              },
              {
                "id": "ch13_q07",
                "type": [
                  "observability",
                  "dashboards"
                ],
                "prompt": "Quais dashboards b√°sicos voc√™ cria para um servi√ßo de API?",
                "difficulty": 2,
                "tags": [],
                "expected": "RPS, lat√™ncia p95/p99, erros 4xx/5xx, satura√ß√£o (CPU/mem/pool), depend√™ncias e fila."
              },
              {
                "id": "ch13_q08",
                "type": [
                  "observability",
                  "runbooks"
                ],
                "prompt": "O que √© runbook e por que ele reduz MTTR?",
                "difficulty": 2,
                "tags": [],
                "expected": "Guia de resposta; acelera diagn√≥stico e a√ß√µes padronizadas."
              },
              {
                "id": "ch13_q09",
                "type": [
                  "observability",
                  "sampling"
                ],
                "prompt": "Quando usar amostragem de traces/logs e quais riscos isso traz?",
                "difficulty": 3,
                "tags": [],
                "expected": "Custo alto; risco de perder casos raros; usar tail-based sampling e triggers por erro."
              },
              {
                "id": "ch13_q10",
                "type": [
                  "observability",
                  "correlation"
                ],
                "prompt": "Como correlacionar logs, m√©tricas e traces em um incidente?",
                "difficulty": 3,
                "tags": [],
                "expected": "Usar trace_id/reques_id, timestamps consistentes e dashboards com links entre sinais."
              },
              {
                "id": "ch13_q11",
                "type": [
                  "observability",
                  "applied"
                ],
                "prompt": "Defina SLI para 'tempo de entrega de notifica√ß√£o' e como medir end-to-end.",
                "difficulty": 3,
                "tags": [],
                "expected": "Medir evento produzido ‚Üí enviado/ack; registrar timestamps e percentis; separar por canal."
              },
              {
                "id": "ch13_q12",
                "type": [
                  "observability",
                  "applied"
                ],
                "prompt": "Quais sinais indicam satura√ß√£o de DB vs satura√ß√£o de app?",
                "difficulty": 3,
                "tags": [],
                "expected": "DB: filas, lock time, IOPS, slow queries; app: CPU, GC, thread pool, lat√™ncia interna."
              },
              {
                "id": "ch13_q13",
                "type": [
                  "observability",
                  "error_budget"
                ],
                "prompt": "Como usar error budget para decidir entre feature e refatora√ß√£o/infra?",
                "difficulty": 3,
                "tags": [],
                "expected": "Se budget baixo, estabilizar antes de lan√ßar; governan√ßa de releases pelo burn rate."
              },
              {
                "id": "ch13_q14",
                "type": [
                  "observability",
                  "incident"
                ],
                "prompt": "Crie um checklist de incident response (detectar ‚Üí mitigar ‚Üí comunicar ‚Üí aprender).",
                "difficulty": 2,
                "tags": [],
                "expected": "Triage, mitiga√ß√£o, comunica√ß√£o, status page, corre√ß√£o, postmortem e a√ß√µes."
              },
              {
                "id": "ch13_q15",
                "type": [
                  "observability",
                  "audit"
                ],
                "prompt": "Por que logs de auditoria s√£o diferentes de logs de aplica√ß√£o?",
                "difficulty": 3,
                "tags": [],
                "expected": "Precisam ser imut√°veis, completos e rastre√°veis (quem fez o qu√™); foco em seguran√ßa/compliance."
              },
              {
                "id": "ch13_q16",
                "type": [
                  "observability",
                  "applied"
                ],
                "prompt": "Como medir 'degrada√ß√£o graciosa' (o sistema est√° funcional por√©m com features desativadas)?",
                "difficulty": 3,
                "tags": [],
                "expected": "M√©tricas de fallback/feature flags, taxa de respostas degradadas, impacto em convers√£o e SLO espec√≠fico."
              }
            ]
          },
          {
            "chapter": 14,
            "id": "seguranca_e_privacidade",
            "title": "Seguran√ßa e Privacidade",
            "keyTopics": [
              "AuthN/AuthZ",
              "OAuth2/OIDC",
              "JWT",
              "TLS",
              "Criptografia em repouso",
              "Secrets",
              "Threat modeling"
            ],
            "questions": [
              {
                "id": "ch14_q01",
                "type": [
                  "security",
                  "authn_authz"
                ],
                "prompt": "Diferencie autentica√ß√£o (AuthN) e autoriza√ß√£o (AuthZ).",
                "difficulty": 1,
                "tags": [],
                "expected": "AuthN identifica quem √©; AuthZ define o que pode fazer."
              },
              {
                "id": "ch14_q02",
                "type": [
                  "security",
                  "oauth"
                ],
                "prompt": "Explique OAuth2 e OIDC em alto n√≠vel. Onde entra o 'id_token'?",
                "difficulty": 3,
                "tags": [],
                "expected": "OAuth2 delega acesso; OIDC adiciona identidade. id_token carrega identidade/claims do usu√°rio."
              },
              {
                "id": "ch14_q03",
                "type": [
                  "security",
                  "jwt"
                ],
                "prompt": "Quais riscos de JWT? Cite 4 cuidados (expira√ß√£o, rota√ß√£o, revoga√ß√£o...).",
                "difficulty": 3,
                "tags": [],
                "expected": "Expira√ß√£o curta, rota√ß√£o de chaves, valida√ß√£o de issuer/audience, revoga√ß√£o via blacklist/short TTL."
              },
              {
                "id": "ch14_q04",
                "type": [
                  "security",
                  "tls"
                ],
                "prompt": "Por que TLS √© obrigat√≥rio mesmo dentro do datacenter/cluster?",
                "difficulty": 2,
                "tags": [],
                "expected": "Zero trust; protege contra sniffing e MITM interno; requisitos de compliance."
              },
              {
                "id": "ch14_q05",
                "type": [
                  "security",
                  "encryption_at_rest"
                ],
                "prompt": "O que significa criptografia em repouso e como gerenciar chaves (KMS)?",
                "difficulty": 2,
                "tags": [],
                "expected": "Dados criptografados no storage; KMS gerencia e rotaciona chaves com pol√≠ticas de acesso."
              },
              {
                "id": "ch14_q06",
                "type": [
                  "security",
                  "secrets"
                ],
                "prompt": "Por que n√£o guardar secrets no c√≥digo? Cite boas pr√°ticas.",
                "difficulty": 2,
                "tags": [],
                "expected": "Vaza em repo/log; usar vault/KMS, rota√ß√£o, least privilege, audit e short-lived creds."
              },
              {
                "id": "ch14_q07",
                "type": [
                  "security",
                  "rbac_abac"
                ],
                "prompt": "Compare RBAC e ABAC. D√™ um exemplo de ABAC.",
                "difficulty": 3,
                "tags": [],
                "expected": "RBAC por pap√©is; ABAC por atributos; ex: acesso permitido se tenant_id == token.tenant_id e recurso=propriet√°rio."
              },
              {
                "id": "ch14_q08",
                "type": [
                  "security",
                  "threat_modeling"
                ],
                "prompt": "O que √© threat modeling (STRIDE) e quando aplicar?",
                "difficulty": 3,
                "tags": [],
                "expected": "Mapear amea√ßas e mitigac√µes; aplicar em designs novos/altera√ß√µes cr√≠ticas."
              },
              {
                "id": "ch14_q09",
                "type": [
                  "security",
                  "rate_limit_ddos"
                ],
                "prompt": "Como rate limiting ajuda contra abuso/DDoS e quais limites podem falhar?",
                "difficulty": 3,
                "tags": [],
                "expected": "Reduz abuso por identidade/IP; falha contra botnets distribu√≠das; precisa WAF/CDN e prote√ß√£o em camadas."
              },
              {
                "id": "ch14_q10",
                "type": [
                  "security",
                  "input_validation"
                ],
                "prompt": "Explique valida√ß√£o e sanitiza√ß√£o de entrada. Qual risco de confiar no client?",
                "difficulty": 2,
                "tags": [],
                "expected": "Client √© control√°vel; validar server-side evita injection, XSS, SSRF e dados inv√°lidos."
              },
              {
                "id": "ch14_q11",
                "type": [
                  "security",
                  "ssrf"
                ],
                "prompt": "O que √© SSRF e como mitigar em servi√ßos que fazem fetch de URLs?",
                "difficulty": 3,
                "tags": [],
                "expected": "Server faz request interno; mitigar com allowlist, bloqueio de IPs internos, DNS pinning e timeouts."
              },
              {
                "id": "ch14_q12",
                "type": [
                  "security",
                  "audit_logging"
                ],
                "prompt": "Que eventos precisam de audit log em sistemas empresariais?",
                "difficulty": 3,
                "tags": [],
                "expected": "Login, mudan√ßas de permiss√£o, altera√ß√µes cr√≠ticas, exporta√ß√£o de dados, a√ß√µes administrativas."
              },
              {
                "id": "ch14_q13",
                "type": [
                  "security",
                  "privacy"
                ],
                "prompt": "Quais princ√≠pios de privacidade (minimiza√ß√£o, finalidade, reten√ß√£o) afetam o design?",
                "difficulty": 3,
                "tags": [],
                "expected": "Coletar s√≥ necess√°rio, usar para finalidade, reter pelo m√≠nimo; exige TTL/arquivamento e controles."
              },
              {
                "id": "ch14_q14",
                "type": [
                  "security",
                  "data_access"
                ],
                "prompt": "Como aplicar princ√≠pio do menor privil√©gio em banco e mensageria?",
                "difficulty": 3,
                "tags": [],
                "expected": "Contas por servi√ßo com permiss√µes m√≠nimas; separar leitura/escrita; rotacionar credenciais."
              },
              {
                "id": "ch14_q15",
                "type": [
                  "security",
                  "applied"
                ],
                "prompt": "Desenhe um fluxo seguro de upload/download de arquivo privado (auth, pre-signed, scanning).",
                "difficulty": 3,
                "tags": [],
                "expected": "API gera URL assinada; upload direto; scanning/AV; metadados; download com assinatura curta e logs."
              },
              {
                "id": "ch14_q16",
                "type": [
                  "security",
                  "applied"
                ],
                "prompt": "Explique como armazenar senhas corretamente (hash, salt, pepper).",
                "difficulty": 2,
                "tags": [],
                "expected": "Hash forte (bcrypt/argon2) + salt √∫nico; pepper opcional em segredo separado; nunca armazenar plaintext."
              },
              {
                "id": "ch14_q17",
                "type": [
                  "security",
                  "tokens"
                ],
                "prompt": "Quando preferir tokens opacos vs JWT?",
                "difficulty": 3,
                "tags": [],
                "expected": "Opaques permitem revoga√ß√£o central e menor exposi√ß√£o; JWT bom para valida√ß√£o local mas revoga√ß√£o dif√≠cil."
              },
              {
                "id": "ch14_q18",
                "type": [
                  "security",
                  "multitenant"
                ],
                "prompt": "Quais garantias de isolamento voc√™ implementa em multi-tenant (row-level, partitioning)?",
                "difficulty": 3,
                "tags": [],
                "expected": "Filtros por tenant em toda query, row-level security, chaves por tenant, quotas e testes de isolamento."
              }
            ]
          },
          {
            "chapter": 15,
            "id": "dados_distribuidos",
            "title": "Consist√™ncia de Dados em Sistemas Distribu√≠dos",
            "keyTopics": [
              "Transa√ß√µes distribu√≠das",
              "2PC",
              "Sagas",
              "Outbox",
              "Idempot√™ncia",
              "Deduplica√ß√£o",
              "Compensa√ß√£o"
            ],
            "questions": [
              {
                "id": "ch15_q01",
                "type": [
                  "distributed_tx",
                  "2pc"
                ],
                "prompt": "O que √© Two-Phase Commit (2PC) e por que ele √© evitado em microservices?",
                "difficulty": 3,
                "tags": [],
                "expected": "Coordena√ß√£o bloqueante e fr√°gil; impacta lat√™ncia/avail; dif√≠cil operar e escalar."
              },
              {
                "id": "ch15_q02",
                "type": [
                  "distributed_tx",
                  "saga"
                ],
                "prompt": "Explique saga: passos, compensa√ß√µes e como lidar com falhas intermedi√°rias.",
                "difficulty": 3,
                "tags": [],
                "expected": "Transa√ß√µes locais + eventos; se falha, executar compensa√ß√µes; precisa idempot√™ncia e rastreio."
              },
              {
                "id": "ch15_q03",
                "type": [
                  "distributed_tx",
                  "outbox"
                ],
                "prompt": "Explique Outbox + Relay e por que ele resolve 'dual write'.",
                "difficulty": 3,
                "tags": [],
                "expected": "Evita escrever DB e broker separadamente; evento √© parte da transa√ß√£o e publicado depois."
              },
              {
                "id": "ch15_q04",
                "type": [
                  "distributed_tx",
                  "inbox"
                ],
                "prompt": "O que √© Inbox (ou dedupe table) e quando ela √© necess√°ria?",
                "difficulty": 3,
                "tags": [],
                "expected": "Registra message-ids processados; evita efeitos duplicados em at-least-once."
              },
              {
                "id": "ch15_q05",
                "type": [
                  "distributed_tx",
                  "eventual_consistency"
                ],
                "prompt": "Como explicar eventual consistency para stakeholders e reduzir impactos no produto?",
                "difficulty": 3,
                "tags": [],
                "expected": "Definir expectativas; UX com status 'processando'; usar compensa√ß√µes e reconcilia√ß√£o."
              },
              {
                "id": "ch15_q06",
                "type": [
                  "distributed_tx",
                  "reconciliation"
                ],
                "prompt": "O que √© reconcilia√ß√£o (reconciliation job) e por que √© comum?",
                "difficulty": 3,
                "tags": [],
                "expected": "Processos que comparam estados e corrigem diverg√™ncias; inevit√°vel em distribu√≠dos."
              },
              {
                "id": "ch15_q07",
                "type": [
                  "distributed_tx",
                  "idempotency"
                ],
                "prompt": "Cite 3 formas de implementar idempot√™ncia em comandos/eventos.",
                "difficulty": 3,
                "tags": [],
                "expected": "Idempotency keys, upsert por chave natural, armazenar processing state/inbox."
              },
              {
                "id": "ch15_q08",
                "type": [
                  "distributed_tx",
                  "ordering"
                ],
                "prompt": "Por que ordering √© dif√≠cil e como projetar para tolerar reordena√ß√£o?",
                "difficulty": 3,
                "tags": [],
                "expected": "Rede/retries reordenam; usar versionamento, timestamps l√≥gicos, conflitos resolv√≠veis e design idempotente."
              },
              {
                "id": "ch15_q09",
                "type": [
                  "distributed_tx",
                  "exactly_once"
                ],
                "prompt": "Em Kafka, o que 'exactly-once semantics' realmente garante e quais limites existem?",
                "difficulty": 3,
                "tags": [],
                "expected": "Garante produ√ß√£o/consumo transacional no cluster; ainda precisa idempot√™ncia externa e cuidado com side effects."
              },
              {
                "id": "ch15_q10",
                "type": [
                  "distributed_tx",
                  "compensation"
                ],
                "prompt": "D√™ exemplos de compensa√ß√£o que n√£o √© simplesmente 'desfazer' (ex.: estorno parcial).",
                "difficulty": 3,
                "tags": [],
                "expected": "Processos de neg√≥cio: estornar pagamento, emitir cr√©dito, reabrir estoque; pode exigir interven√ß√£o."
              },
              {
                "id": "ch15_q11",
                "type": [
                  "distributed_tx",
                  "applied"
                ],
                "prompt": "Projete uma saga para 'criar pedido' com pagamento e estoque, incluindo eventos e falhas.",
                "difficulty": 3,
                "tags": [],
                "expected": "Eventos: OrderCreated‚ÜíPaymentAuthorized‚ÜíStockReserved; falhas disparam Compensation: PaymentVoid/StockRelease."
              },
              {
                "id": "ch15_q12",
                "type": [
                  "distributed_tx",
                  "applied"
                ],
                "prompt": "Como garantir que um 'email de confirma√ß√£o' seja enviado no m√°ximo 1 vez?",
                "difficulty": 3,
                "tags": [],
                "expected": "Outbox + dedupe, idempotent sender, unique constraint por (order_id, template) e retry seguro."
              },
              {
                "id": "ch15_q13",
                "type": [
                  "distributed_tx",
                  "consistency_levels"
                ],
                "prompt": "Quais invariantes voc√™ mant√©m com consist√™ncia forte e quais aceita eventual?",
                "difficulty": 3,
                "tags": [],
                "expected": "Invariantes cr√≠ticas (saldo, permiss√µes) fortes; views derivadas (feed, analytics) eventual."
              },
              {
                "id": "ch15_q14",
                "type": [
                  "distributed_tx",
                  "applied"
                ],
                "prompt": "Explique como usar *fencing tokens* para evitar split-brain em l√≠deres.",
                "difficulty": 3,
                "tags": [],
                "expected": "Tokens monot√¥nicos; s√≥ o maior token pode atuar; recursos rejeitam tokens antigos."
              },
              {
                "id": "ch15_q15",
                "type": [
                  "distributed_tx",
                  "applied"
                ],
                "prompt": "Descreva uma estrat√©gia de *dedup* para eventos (windowing/TTL) e seus trade-offs.",
                "difficulty": 3,
                "tags": [],
                "expected": "Guardar ids por janela/TTL; custo de mem√≥ria; risco de duplicatas fora da janela."
              }
            ]
          },
          {
            "chapter": 16,
            "id": "exercicios_praticos",
            "title": "Exerc√≠cios Pr√°ticos de System Design",
            "keyTopics": [
              "URL shortener",
              "Rate limiter",
              "News feed",
              "Chat",
              "Notifica√ß√µes",
              "Upload de arquivos",
              "Search",
              "Observabilidade do caso"
            ],
            "questions": [
              {
                "id": "ch16_q01",
                "type": [
                  "case",
                  "url_shortener"
                ],
                "prompt": "Projete um encurtador de URL: requisitos, componentes e armazenamento.",
                "difficulty": 3,
                "tags": [],
                "expected": "API, gerador de c√≥digo, DB KV, cache, redirecionamento, analytics, rate limit."
              },
              {
                "id": "ch16_q02",
                "type": [
                  "case",
                  "url_shortener"
                ],
                "prompt": "Que esquema de gera√ß√£o de c√≥digos voc√™ usaria (base62, hash, snowflake)? Trade-offs.",
                "difficulty": 3,
                "tags": [],
                "expected": "Base62 incremental/ID; hash pode colidir; snowflake orden√°vel; considerar previsibilidade e colis√µes."
              },
              {
                "id": "ch16_q03",
                "type": [
                  "case",
                  "rate_limiter"
                ],
                "prompt": "Projete um rate limiter distribu√≠do para API: algoritmo e armazenamento.",
                "difficulty": 3,
                "tags": [],
                "expected": "Token bucket/leaky bucket; Redis com atomic ops; sharding por key; fallback local."
              },
              {
                "id": "ch16_q04",
                "type": [
                  "case",
                  "feed"
                ],
                "prompt": "Projete um news feed: fan-out on write vs fan-out on read.",
                "difficulty": 3,
                "tags": [],
                "expected": "Write: pr√©-computa timelines; Read: computa na leitura; trade-offs de custo e lat√™ncia."
              },
              {
                "id": "ch16_q05",
                "type": [
                  "case",
                  "feed"
                ],
                "prompt": "Como lidar com celebridades no feed (hot users)?",
                "difficulty": 3,
                "tags": [],
                "expected": "Mistura h√≠brida, caching, separar followers grandes, computa√ß√£o sob demanda, limites e precompute parcial."
              },
              {
                "id": "ch16_q06",
                "type": [
                  "case",
                  "chat"
                ],
                "prompt": "Projete chat em tempo real: protocolos, armazenamento e entrega.",
                "difficulty": 3,
                "tags": [],
                "expected": "WebSocket, presen√ßa, mensagens persistidas, fan-out, ack/seen, ordering por conversa."
              },
              {
                "id": "ch16_q07",
                "type": [
                  "case",
                  "chat"
                ],
                "prompt": "Como garantir ordena√ß√£o de mensagens por conversa em um sistema distribu√≠do?",
                "difficulty": 3,
                "tags": [],
                "expected": "Sequ√™ncia por conversa (per partition), IDs monot√¥nicos, armazenamento com ordena√ß√£o e reconcilia√ß√£o."
              },
              {
                "id": "ch16_q08",
                "type": [
                  "case",
                  "notifications"
                ],
                "prompt": "Projete um sistema de notifica√ß√µes multi-canal com prefer√™ncias e dedupe.",
                "difficulty": 3,
                "tags": [],
                "expected": "Event bus, rules engine, templates, provider gateways, dedupe store, tracking e DLQ."
              },
              {
                "id": "ch16_q09",
                "type": [
                  "case",
                  "uploads"
                ],
                "prompt": "Projete upload de arquivos grandes (multipart), v√≠rus scan e distribui√ß√£o via CDN.",
                "difficulty": 3,
                "tags": [],
                "expected": "Upload direto ao object storage, multipart, scan async, metadados em DB, CDN signed URLs."
              },
              {
                "id": "ch16_q10",
                "type": [
                  "case",
                  "search"
                ],
                "prompt": "Projete busca full-text: indexa√ß√£o, refresh e relev√¢ncia b√°sica.",
                "difficulty": 3,
                "tags": [],
                "expected": "Index pipeline, elastic-like, analyzer, refresh interval, ranking, cache e fallback."
              },
              {
                "id": "ch16_q11",
                "type": [
                  "case",
                  "metrics"
                ],
                "prompt": "Para um sistema desses, quais m√©tricas de produto e t√©cnicas voc√™ mediria?",
                "difficulty": 2,
                "tags": [],
                "expected": "DAU, reten√ß√£o, convers√£o, lat√™ncia, erro, entrega, custo por a√ß√£o e satisfa√ß√£o."
              },
              {
                "id": "ch16_q12",
                "type": [
                  "case",
                  "failure"
                ],
                "prompt": "Liste falhas prov√°veis em um feed/chat e mitiga√ß√£o (fila, cache, fallback).",
                "difficulty": 3,
                "tags": [],
                "expected": "Broker down, DB lag, hot keys, websocket storms; mitiga√ß√£o com retries, circuit breaker, autoscaling e degrada√ß√£o."
              },
              {
                "id": "ch16_q13",
                "type": [
                  "case",
                  "migration"
                ],
                "prompt": "Se o MVP come√ßa monol√≠tico, como voc√™ desenha para migra√ß√£o futura sem dor?",
                "difficulty": 3,
                "tags": [],
                "expected": "M√≥dulos claros, contratos internos, eventing opcional, strangler e observabilidade."
              },
              {
                "id": "ch16_q14",
                "type": [
                  "case",
                  "data_consistency"
                ],
                "prompt": "Em notifica√ß√µes, por que 'exatamente uma vez' √© raro? Qual abordagem pr√°tica?",
                "difficulty": 3,
                "tags": [],
                "expected": "Duplicatas s√£o comuns; usar at-least-once + dedupe/idempot√™ncia e aceitar raros duplicados com corre√ß√£o."
              },
              {
                "id": "ch16_q15",
                "type": [
                  "case",
                  "cost"
                ],
                "prompt": "Onde est√£o os principais custos em cada caso (CDN/egress, DB, broker) e como reduzir?",
                "difficulty": 3,
                "tags": [],
                "expected": "Egress e m√≠dia; cache/CDN; compress√£o; particionamento; reduzir fan-out; batch."
              },
              {
                "id": "ch16_q16",
                "type": [
                  "case",
                  "interview"
                ],
                "prompt": "Em entrevista, quais perguntas voc√™ deve fazer *antes* de desenhar a solu√ß√£o para qualquer caso?",
                "difficulty": 2,
                "tags": [],
                "expected": "Escopo, usu√°rios, volume, SLAs, consist√™ncia, seguran√ßa, reten√ß√£o, multi-regi√£o, custos, prioridades."
              },
              {
                "id": "ch16_q17",
                "type": [
                  "case",
                  "diagramming"
                ],
                "prompt": "Desenhe em palavras um diagrama de sequ√™ncia do caso 'criar pedido' com eventos e compensa√ß√µes.",
                "difficulty": 3,
                "tags": [],
                "expected": "Cliente‚ÜíOrder svc‚ÜíOutbox event‚ÜíPayment svc‚ÜíStock svc‚ÜíOrder update; falhas disparam compensa√ß√µes."
              },
              {
                "id": "ch16_q18",
                "type": [
                  "case",
                  "testing"
                ],
                "prompt": "Como testar e validar o design (load test, chaos, canary, shadow traffic)?",
                "difficulty": 3,
                "tags": [],
                "expected": "Testes de carga, caos, can√°rio, tr√°fego sombra, replay de eventos, testes de contrato."
              },
              {
                "id": "ch16_q19",
                "type": [
                  "case",
                  "security"
                ],
                "prompt": "Quais pontos de seguran√ßa aparecem em quase todos esses designs?",
                "difficulty": 2,
                "tags": [],
                "expected": "Auth, rate limit, valida√ß√£o, criptografia, secrets, auditoria, isolamento multi-tenant."
              },
              {
                "id": "ch16_q20",
                "type": [
                  "case",
                  "observability"
                ],
                "prompt": "Quais traces/spans voc√™ instrumentaria no caso do feed/chat para reduzir MTTR?",
                "difficulty": 3,
                "tags": [],
                "expected": "Spans por fan-out, broker, DB, cache, websocket send; correlacionar por request/message id."
              },
              {
                "id": "ch16_q21",
                "type": [
                  "case",
                  "tradeoffs"
                ],
                "prompt": "Escolha um caso (feed/chat/notifica√ß√£o) e explique 3 trade-offs dif√≠ceis que voc√™ defenderia.",
                "difficulty": 3,
                "tags": [],
                "expected": "Ex.: fan-out write/read, consist√™ncia vs lat√™ncia, custo vs SLO, armazenamento vs recomputa√ß√£o."
              }
            ]
          }
        ]
      }
    }
  ]
}